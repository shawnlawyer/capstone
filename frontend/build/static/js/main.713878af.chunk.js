(this.webpackJsonpcapstone=this.webpackJsonpcapstone||[]).push([[0],{173:function(e,t,a){e.exports=a(266)},266:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(13),i=a(110),r=a(33),s=a(82),o=a.n(s),u=a(97),m=a(60),d=a(61),p=a(113),f=a(111),E=a(15),b=a(147),h=new(function(){function e(){Object(m.a)(this,e),this.parseJwt=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return null}},this.auth0=new b.a.WebAuth({domain:"shawnlawyer.auth0.com",audience:"https://iconsorts.com/",clientID:"lwY9IA7VWHDIOdU7MwCuX0HgAKOUPvRu",redirectUri:window.location.origin+"/callback",responseType:"token id_token",scope:"openid profile"}),this.getProfile=this.getProfile.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this)}return Object(d.a)(e,[{key:"getProfile",value:function(){return this.profile}},{key:"getIdToken",value:function(){return this.idToken}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt}},{key:"signIn",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;return new Promise((function(t,a){e.auth0.parseHash((function(n,c){return n?a(n):c&&c.idToken?(e.setSession(c),void t()):a(n)}))}))}},{key:"setSession",value:function(e){this.idToken=e.idToken,this.profile=e.idTokenPayload,this.accessToken=e.accessToken;try{this.profile.permissions=this.parseJwt(e.accessToken).permissions}catch(t){this.profile.permissions=[]}this.expiresAt=1e3*e.idTokenPayload.exp}},{key:"hasPermission",value:function(e){return!(!this.isAuthenticated()||!this.profile.permissions.includes(e))}},{key:"permissions",value:function(){return this.profile.permissions}},{key:"signOut",value:function(){this.auth0.logout({returnTo:window.location.origin,clientID:"lwY9IA7VWHDIOdU7MwCuX0HgAKOUPvRu"})}},{key:"silentAuth",value:function(){var e=this;return new Promise((function(t,a){e.auth0.checkSession({},(function(n,c){if(n)return a(n);e.setSession(c),t()}))}))}},{key:"apiAuthHeaders",value:function(){return{headers:{Authorization:"Bearer ".concat(h.accessToken)}}}}]),e}()),g=h,v=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.handleAuthentication();case 2:this.props.history.replace("/");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("p",null,"Loading profile...")}}]),a}(n.Component),y=Object(E.g)(v),O=a(3),k=(a(99),a(148)),j=a.n(k),C=new(function(){function e(){Object(m.a)(this,e),this.pusher=new j.a("129eb635d8bd35d8b915",{cluster:"us3",encrypted:!0}),this.channels={}}return Object(d.a)(e,[{key:"subscribe",value:function(e){e in this.channels||(this.channels[e]={channel:this.pusher.subscribe(e),bindings:[]})}},{key:"bindAction",value:function(e,t,a){this.subscribe(e),this.channels[e].bindings.includes(t)||(this.channels[e].bindings.push(t),this.channels[e].channel.bind(t,(function(e){a(e)})))}}]),e}()),S=a(275),N=a(79),w=a(45),x=a.n(w),z=window.location.origin+"/api";function _(e){var t=e.endpoint,a=e.type,n=e.data,c=e.success,l=e.error,i=e.final,r=e.successCallback,s=e.errorCallback,o=e.finalCallback;return function(e){var u=!1,m=!1;switch(a){case"get":u=x.a.get,m=[t,g.apiAuthHeaders()];break;case"post":u=x.a.post,m=[t,n,g.apiAuthHeaders()];break;case"patch":u=x.a.patch,m=[t,n,g.apiAuthHeaders()];break;case"delete":u=x.a.delete,m=[t,g.apiAuthHeaders()];break;default:return void console.log("error, no type defined on xhr call")}u.apply(void 0,Object(N.a)(m)).then((function(e){"function"===typeof c&&c(e),"function"===typeof r&&r()})).catch((function(e){"function"===typeof l&&l(e),"function"===typeof s&&s()})).finally((function(){"function"===typeof i&&i(),"function"===typeof o&&o()}))}}x.a.defaults.baseURL=z;var T={1:{name:["Classifier","Classifiers"],code:JSON.stringify({name:"example",intents:[{name:"greeting",patterns:[{text:"Hello"}]}]},null,2)},2:{name:["Chat Bot","Chat Bots"],code:JSON.stringify({name:"example",intents:[{name:"greeting",patterns:[{text:"Hello"}],responses:[{text:"Hello World"}]}]},null,2)}};function A(){return{type:"LOADING_AGENTS",payload:null}}function D(e){var t={};return e.map((function(e){t[e.uuid]=e})),{type:"STORE_AGENTS",payload:t}}function P(e){return{type:"CLEAR_AGENT",payload:e}}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var a=e.success,n=e.error,c=e.final;t(A),t(_({endpoint:"/agents",type:"get",success:function(e){t(D(e.data.results))},successCallback:a,error:function(e){console.log(e),t(D([]))},errorCallback:n,finalCallback:c}))}}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e);a(_({endpoint:i,type:"get",success:function(e){a(D([e.data.result])),a(R())},successCallback:n,error:function(e){a(D([]))},errorCallback:c,finalCallback:l}))}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i=e.uuid,r=i?"patch":"post",s=i?"/agents/".concat(i):"/agents";a(_({type:r,endpoint:s,data:{data:e},success:function(e){a(M({final:l}))},successCallback:n,errorCallback:c}))}}function R(e){return function(t,a){Object.values(e).map((function(e){C.bindAction(e.uuid,"start",(function(e){t(function(e){return function(t,a){S.b.success("Agent ".concat(e.name," build started.")),t(D([e]))}}(e))})),C.bindAction(e.uuid,"complete",(function(e){t(function(e){return function(t,a){S.b.success("Agent ".concat(e.name," build complete.")),t(D([e]))}}(e))})),C.bindAction(e.uuid,"error",(function(e){t(function(e){return function(t,a){S.b.error("There was an error building agent ".concat(e.name,".")),t(D([e]))}}(e))})),C.bindAction(e.uuid,"reload",(function(e){t(L(e.uuid))})),C.bindAction(e.uuid,"store",(function(e){t(D(e.results))})),C.bindAction(e.uuid,"clear",(function(e){t(P(e.uuid))}))}))}}var U=a(273),H=a(267),J=a(277),W=a(278),B=a(279),G=a(280),V=a(281),F=(a(34),U.a.SubMenu,H.a.Header,H.a.Content,H.a.Sider);var K=Object(E.g)((function(e){var t=Object(n.useState)(!0),a=Object(O.a)(t,2),l=a[0],i=a[1];return c.a.createElement(F,{collapsed:l,defaultCollapsed:!0,zeroWidthTriggerStyle:{top:0},breakpoint:"xxl",collapsedWidth:0,theme:"light",style:{zIndex:"1000",position:"fixed",height:"100vh",top:0,left:0,bottom:0},onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){i(e)}},c.a.createElement(U.a,{mode:"inline",theme:"light",style:{top:0,bottom:0,width:"100%",height:"100%"},onClick:function(){i(!0)}},c.a.createElement(U.a.Item,{key:"home",icon:c.a.createElement(J.a,null)},c.a.createElement(r.b,{to:"/"},"Consorts Home")),g.hasPermission("read:agents")&&c.a.createElement(U.a.Item,{key:"classifiers",icon:c.a.createElement(W.a,{rotate:270})},c.a.createElement(r.b,{to:"/classifiers"},T[1].name[1])),g.hasPermission("read:agents")&&c.a.createElement(U.a.Item,{key:"chatbots",icon:c.a.createElement(B.a,null)},c.a.createElement(r.b,{to:"/chatbots"},T[2].name[1])),g.isAuthenticated()?c.a.createElement(U.a.Item,{key:"logout",icon:c.a.createElement(G.a,null),onClick:function(){g.signOut(),e.history.replace("/")}},"Sign Out"):c.a.createElement(U.a.Item,{key:"login",icon:c.a.createElement(V.a,null),onClick:g.signIn},"Sign In")))}));function X(){var e=Object(n.useContext)(i.b).store,t=e.getState,a=e.dispatch,c=e.subscribe,l=Object(n.useState)(t()),r=Object(O.a)(l,2),s=r[0],o=r[1];return Object(n.useEffect)((function(){return c((function(){o(t())}),[])})),[s,a]}function Y(e){switch(e.type){case 1:return c.a.createElement(W.a,{rotate:270});case 2:return c.a.createElement(B.a,null);default:return null}}var q=a(268),$=a(274);H.a.Header;var Q=Object(E.g)((function(e){return c.a.createElement("div",{className:"list no-margin-padding"},c.a.createElement("div",{className:"grid no-margin-padding",style:{borderBottom:"1px solid #f0f0f0",background:"#fff",zIndex:"999",whiteSpace:"nowrap",position:"fixed",top:"0",left:"0",paddingLeft:"3em",paddingRight:".6em"}},e.children||c.a.createElement(q.a,{size:"small",align:"center",style:{height:"3em"}},e.icon,e.title),g.isAuthenticated()&&c.a.createElement(q.a,{align:"center"},c.a.createElement($.a,{size:"medium"},g.getProfile().name.charAt(0).toUpperCase()))))})),Z=a(282),ee=(a(96),window.location.origin+"/api"),te=H.a.Content;H.a.Sider;function ae(e){var t=X(),a=(Object(O.a)(t,2)[1],Object(n.useState)(!1)),l=Object(O.a)(a,2),i=(l[0],l[1],e.type),r=((e.identifier||e.match.params.identifier).identifier,Object(n.useState)("")),s=Object(O.a)(r,2),o=s[0],u=s[1],m=Object(n.useState)(""),d=Object(O.a)(m,2),p=d[0],f=d[1],E=function(e){u(e.target.value)},b=function(t){t.preventDefault(),x.a.post("".concat(ee,"/chat/").concat(e.identifier||e.match.params.identifier),{message:o}).then((function(e){f(e.data.response),u("")}))},h=function(){return c.a.createElement("form",{className:"grid",onSubmit:b},c.a.createElement("div",{className:"component terraced"},c.a.createElement("input",{name:"message",className:"chat-input",onChange:E,value:o,placeholder:"Type here."}),c.a.createElement("div",{className:"options"},c.a.createElement("div",{onClick:b,className:"chat-input-send"},c.a.createElement(Z.a,null)," "))))};switch(i){case"inline":return c.a.createElement("div",{className:"component terraced",style:{background:"#fff",height:"100%"}},c.a.createElement("div",{className:"list no-margin-padding-border",style:{height:"100%"}},c.a.createElement(q.a,{align:"center",style:{padding:0,height:"3.5em",border:0}},c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement(Y,{type:2})," Chat")),c.a.createElement(te,{style:{background:"#fff"}},c.a.createElement("div",{className:"chat-responses",style:{margin:"1em"}},p.split("\n").map((function(e,t){return c.a.createElement("span",{key:t},e,c.a.createElement("br",null))})))),h()));case"page":default:return c.a.createElement(se,{footer:c.a.createElement("div",{className:"footer"},h()),header:c.a.createElement(Q,{icon:c.a.createElement(Y,{type:2}),title:"".concat(T[2].name[1]," > Chat")})},c.a.createElement(H.a,{style:{background:"#fff"}},c.a.createElement("div",{className:"chat-responses",style:{margin:"1em"}},p.split("\n").map((function(e,t){return c.a.createElement("span",{key:t},e,c.a.createElement("br",null))})))))}}var ne=a(85),ce=(H.a.Header,H.a.Content,H.a.Sider);var le=Object(E.g)((function(e){var t=Object(n.useState)(!0),a=Object(O.a)(t,2),l=a[0],i=a[1];return c.a.createElement(ce,{collapsed:l,defaultCollapsed:!0,zeroWidthTriggerStyle:{position:"fixed",right:"2.5em",background:"none",top:"-.1em"},breakpoint:"xxl",width:"98vw",collapsedWidth:0,theme:"light",trigger:c.a.createElement(ne.a,{size:"small",shape:"circle",icon:c.a.createElement(B.a,null),type:"primary",style:{}}),style:{bottom:"1vh",zIndex:"1002",position:"fixed",height:"90vh",right:l?0:"1vw",background:"none"},onCollapse:function(e,t){i(e)}},c.a.createElement(ae,{identifier:"main",type:"inline"}))})),ie=H.a.Content,re=H.a.Footer;function se(e){return c.a.createElement(H.a,{style:{background:"#fff"}},e.header?c.a.createElement("div",null,e.header):null,c.a.createElement(ie,{className:"site-layout",style:{paddingTop:".5em",marginTop:e.header?"3em":"0",background:"#fff"}},e.children),e.footer?c.a.createElement(re,{style:{background:"#fff"}},e.footer):null)}function oe(){return c.a.createElement(se,{header:c.a.createElement(Q,{title:"Consorts"}),footer:c.a.createElement("div",{className:"footer"},"Consorts By Shawn Lawyer 331 Wilson Ave, Swannanoa NC 28778")})}var ue=a(276);function me(){return{type:"LOADING_MODULES",payload:null}}function de(e){var t={};return e.data.results.map((function(e){t[e.uuid]=e})),{type:"STORE_MODULES",payload:t}}function pe(e){return{type:"STORE_MODULE",payload:e.data.result}}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var a=e.success,n=e.error,c=e.final;t(me),t(_({type:"get",endpoint:"/modules",success:function(e){t(de(e))},successCallback:a,error:function(e){t(de({data:{results:[]}}))},errorCallback:n,finalCallback:c}))}}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/modules/".concat(e);a(_({type:"get",endpoint:i,success:function(e){a(pe(e))},successCallback:n,error:function(e){a(pe({data:{results:[]}}))},errorCallback:c,finalCallback:l}))}}function be(e,t,a){var n=document.createElement("a"),c=new Blob([e],{type:a});n.href=URL.createObjectURL(c),n.download=t,n.click()}function he(e){var t=e.name,a=e.intents,n=e.type,c={name:t,intents:a.map((function(e){var t={name:e.name};switch("object"===typeof e.patterns&&e.patterns.length&&(t.patterns=e.patterns.map((function(e){return{text:e.text}}))),n){case 1:break;case 2:default:"object"===typeof e.responses&&e.responses.length&&(t.responses=e.responses.map((function(e){return{text:e.text}})))}return t}))};return JSON.stringify(c,null,2)}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final;a(_({type:"get",endpoint:"/modules/".concat(e),success:function(e){be(he(e.data.result),"".concat(e.data.result.name.replace(" ","_"),".json"),"text/plain")},successCallback:n,errorCallback:c,finalCallback:l}))}}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i=e.uuid,r=i?"patch":"post",s=i?"/modules/".concat(i):"/modules";a(_({type:r,endpoint:s,data:{data:e},success:function(t){a(pe(t)),a(fe({final:l})),a(L(e.agent_uuid))},successCallback:n,errorCallback:c}))}}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=(t.final,e.uuid),r=i?"patch":"post",s=i?"/intents/".concat(i):"/intents",o=n().module;a(_({type:r,endpoint:s,data:{data:e},success:function(e){a(Ee(o.uuid,t))},successCallback:c,errorCallback:l}))}}function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=(t.final,e.uuid),r=i?"patch":"post",s=i?"/intent/patterns/".concat(i):"/intent/patterns",o=n().module;a(_({type:r,endpoint:s,data:{data:e},success:function(e){a(Ee(o.uuid,t))},successCallback:c,errorCallback:l}))}}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=(t.final,e.uuid),r=i?"patch":"post",s=i?"/intent/responses/".concat(i):"/intent/responses",o=n().module;a(_({type:r,endpoint:s,data:{data:e},success:function(e){a(Ee(o.uuid,t))},successCallback:c,errorCallback:l}))}}function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final,r="/modules/".concat(e);a(_({type:"delete",endpoint:r,success:function(e){a(fe({final:i}))},successCallback:c,errorCallback:l}))}}function Ce(e){ue.a.error({message:"Error",description:"The template is not properly formatted JSON"})}var Se=a(283);H.a.Content;function Ne(e){var t=e.size||"large",a="loading-".concat(t);return e.loaded?e.children:c.a.createElement("div",{className:"head"},c.a.createElement("div",{className:a},c.a.createElement(Se.a,{spin:!0})))}var we=a(272),xe=a(284),ze=a(285),_e=a(286),Te=we.a.Option;function Ae(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.intent_uuid,m=e.reset,d=Object(n.useState)(!1),p=Object(O.a)(d,2),f=p[0],E=p[1],b=Object(n.useState)(!1),h=Object(O.a)(b,2),g=h[0],v=h[1],y=Object(n.useState)(!1),k=Object(O.a)(y,2),j=k[0],C=k[1],S=Object(n.useState)(""),w=Object(O.a)(S,2),x=w[0],z=w[1],T=Object(n.useState)([]),A=Object(O.a)(T,2),D=A[0],P=A[1];Object(n.useEffect)((function(){if(!j){var e={success:function(e){P(e.data)},error:function(){P([])},final:function(){C(!0)}};C(!1),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final,r="/intent/patterns/".concat(e,"/variations");n().module;a(_({type:"get",endpoint:r,success:function(e){c(e)},errorCallback:l,finalCallback:i}))}}(o,e))}}),[o]);return c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={success:function(){m()},error:function(){s(!1),v(!1)},final:function(){s(!1),E(!1),v(!1)}};e.preventDefault(),f&&(s(!0),v(!0),a(Oe({intent_uuid:u,text:x},t)))}},c.a.createElement(Ne,{loaded:j,size:"small"},c.a.createElement(q.a,{size:"small"},c.a.createElement(xe.a,{rotate:"180",style:{marginRight:".35em"}}),D.map((function(e,t){return 0==e[1].length?c.a.createElement("div",null,e[0]):c.a.createElement(we.a,{bordered:!1,onChange:function(e){!function(e,t){var a=Object(N.a)(D),n="";a[t][0]=D[t][1][e],P(a),a.map((function(e){n+=" ".concat(e[0])})),z(n),E(!0)}(e,t)},value:e[0],placeholder:e[0],name:"name_".concat(t),size:"small",dropdownMatchSelectWidth:!1},e[1].map((function(e,t){return c.a.createElement(Te,{value:t},e)})))}))),c.a.createElement("div",{className:"options"},c.a.createElement(q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),f&&(g?c.a.createElement(ne.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(ne.a,{disabled:r,htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:c.a.createElement(ze.a,null)})),c.a.createElement(ne.a,{type:"danger",shape:"circle",size:"small",onClick:m,icon:c.a.createElement(_e.a,null)})))))}var De=a(269),Pe=a(287),Me=a(288),Le=a(289);function Ie(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.intent_uuid,m=Object(n.useState)(e.text||""),d=Object(O.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(O.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(O.a)(v,2),k=y[0],j=y[1],C=Object(n.useState)(!1),S=Object(O.a)(C,2),N=S[0],w=S[1],x=Object(n.useState)(!1),z=Object(O.a)(x,2),T=z[0],A=z[1],D=function(){s(!1),f(e.text||""),g(!1),j(!1),A(!1)};return c.a.createElement("div",{className:"component terraced"},T?c.a.createElement(Ae,{uuid:o,intent_uuid:u,reset:D}):c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={error:function(){s(!1),j(!1)},final:o?function(){s(!1),g(!1),j(!1)}:D};e.preventDefault(),h&&(s(!0),j(!0),a(Oe(o?{uuid:o,text:p}:{intent_uuid:u,text:p},t)))}},c.a.createElement("div",{className:"component"},c.a.createElement(q.a,{size:"small"},c.a.createElement(xe.a,{rotate:"180"})),c.a.createElement("input",{type:"text",name:"text",onChange:function(t){f(t.target.value),g(t.target.value!==e.text&&""!==t.target.value)},value:p,placeholder:o?"Pattern":"New Pattern"}),c.a.createElement("div",{className:"options"},c.a.createElement(q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),o&&c.a.createElement(ne.a,{disabled:r,shape:"circle",size:"small",icon:c.a.createElement(Pe.a,null),onClick:A}),h&&(k?c.a.createElement(ne.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(ne.a,{disabled:r,htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Me.a,null):c.a.createElement(ze.a,null)})),h?c.a.createElement(ne.a,{type:"danger",shape:"circle",size:"small",onClick:D,icon:c.a.createElement(_e.a,null)}):o&&(N?c.a.createElement(ne.a,{shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(De.a,{disabled:r,title:"Confirming Delete?",placement:"left",onConfirm:function(){s(!0),w(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final,r="/intent/patterns/".concat(e),s=n().module;a(_({type:"delete",endpoint:r,success:function(e){a(Ee(s.uuid,{final:i}))},successCallback:c,errorCallback:l}))}}(o))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(ne.a,{disabled:r,type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Le.a,null)}))))))))}var Re=a(86);function Ue(e){var t=e.items||0,a=e.description||null;return t.length>0?c.a.createElement(q.a,{direction:"vertical",style:{width:"100%"}},e.children):c.a.createElement("div",{className:"terraced",style:{padding:".5em"}},c.a.createElement(Re.a,{description:c.a.createElement("div",null,c.a.createElement("b",null,a))}))}var He=a(270);function Je(e){var t=e.intent_uuid,a=e.patterns,n=e.is_locked;return c.a.createElement(q.a,{direction:"vertical",style:{width:"100%",padding:".5em 0"}},c.a.createElement("div",{className:"head"},c.a.createElement(He.a,{plain:!0},c.a.createElement("b",null,"Patterns"))),!n&&c.a.createElement(Ie,{intent_uuid:t}),c.a.createElement(Ue,{items:a,description:"Patterns Empty"},a.map((function(e,a){return n?c.a.createElement("div",{className:"component terraced"},e.text):c.a.createElement(Ie,{key:e.id,uuid:e.uuid,intent_uuid:t,text:e.text})}))))}var We=a(290);function Be(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.intent_uuid,m=Object(n.useState)(e.text||""),d=Object(O.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(O.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(O.a)(v,2),k=y[0],j=y[1],C=Object(n.useState)(!1),S=Object(O.a)(C,2),N=S[0],w=S[1],x=function(){s(!1),f(e.text||""),g(!1),j(!1)};return c.a.createElement("div",{className:"component terraced"},c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={error:function(){s(!1),j(!1)},final:o?function(){s(!1),g(!1),j(!1)}:x};e.preventDefault(),h&&(s(!0),j(!0),a(ke(o?{uuid:o,text:p}:{intent_uuid:u,text:p},t)))}},c.a.createElement("div",{className:"component"},c.a.createElement(q.a,{size:"small",style:{maxHeight:"1.4em"}},c.a.createElement(We.a,{rotate:"180"})),c.a.createElement("textarea",{rows:p.split(/\r*\n/).length,name:"text",onChange:function(t){f(t.target.value),g(t.target.value!==e.text&&""!==t.target.value)},value:p,placeholder:o?"Response":"New Response"}),c.a.createElement("div",{className:"options"},c.a.createElement(q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),h&&(k?c.a.createElement(ne.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(ne.a,{disabled:r,htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Me.a,null):c.a.createElement(ze.a,null)})),h?c.a.createElement(ne.a,{type:"danger",shape:"circle",size:"small",onClick:x,icon:c.a.createElement(_e.a,null)}):o&&(N?c.a.createElement(ne.a,{shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(De.a,{disabled:r,title:"Confirming Delete?",placement:"left",onConfirm:function(){s(!0),w(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final,r="/intent/responses/".concat(e),s=n().module;a(_({type:"delete",endpoint:r,success:function(e){a(Ee(s.uuid,{final:i}))},successCallback:c,errorCallback:l}))}}(o))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(ne.a,{disabled:r,type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Le.a,null)}))))))))}var Ge=H.a.Content;function Ve(e){var t=e.intent_uuid,a=e.responses,n=e.is_locked;return c.a.createElement(q.a,{direction:"vertical",style:{width:"100%",padding:".5em 0"}},c.a.createElement("div",{className:"head"},c.a.createElement(He.a,{plain:!0},c.a.createElement("b",null,"Responses"))),!n&&c.a.createElement(Be,{intent_uuid:t}),c.a.createElement(Ue,{items:a,description:"Responses Empty"},a.map((function(e,t){return n?c.a.createElement("div",{key:e.uuid,className:"component"},c.a.createElement(Ge,null,e.text.split("\n").map((function(e,t){return c.a.createElement("span",{key:t},e,c.a.createElement("br",null))})))):c.a.createElement(Be,{key:e.uuid,uuid:e.uuid,text:e.text})}))))}function Fe(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.module_uuid,m=Object(n.useState)(e.name||""),d=Object(O.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(O.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(O.a)(v,2),k=y[0],j=y[1],C=function(){s(!1),f(e.name||""),g(!1),j(!1)};return c.a.createElement("div",{className:"component terraced"},c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={error:function(){s(!1),j(!1)},final:o?function(){s(!1),g(!1),j(!1)}:C};e.preventDefault(),h&&(s(!0),j(!0),a(ye(o?{uuid:o,name:p}:{module_uuid:u,name:p},t)))}},c.a.createElement("div",{className:"component"},c.a.createElement("input",{type:"text",name:"name",onChange:function(t){var a=t.target.value;a=(a=a.replace(/[&\^@`!=;|\[\]/\\#,+()$~%.'":*?<>{}]/g,"")).replace(/[\-\s]/g,"_"),f(a),g(a!==e.name&&""!==a)},value:p,placeholder:o?"Intent Name":"New Intent Name"}),c.a.createElement("div",{className:"options"},c.a.createElement(q.a,{size:"small",style:{height:"1em"},align:"center"},h&&(k?c.a.createElement(ne.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(ne.a,{htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Me.a,null):c.a.createElement(ze.a,null)})),h&&c.a.createElement(ne.a,{disabled:r,type:"danger",shape:"circle",size:"small",onClick:C,icon:c.a.createElement(_e.a,null)}))))))}var Ke=a(291),Xe=a(292);function Ye(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=(i[1],e.agent_type),o=e.intent,u=e.is_locked,m=Object(n.useState)(!1),d=Object(O.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(O.a)(E,2),h=b[0],v=b[1];return c.a.createElement("div",{className:"component terraced"},c.a.createElement("div",{className:"list no-margin-padding-border"},c.a.createElement("div",{className:"component"},c.a.createElement("div",{onClick:function(){return f(!p)}},o.name),c.a.createElement("div",{className:"options"},c.a.createElement(q.a,{size:"small"},!u&&g.hasPermission("delete:agents")&&(h?c.a.createElement(ne.a,{type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(De.a,{disabled:r,title:"Confirming Delete?",placement:"left",onConfirm:function(){v(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final,r="/intents/".concat(e),s=n().module;a(_({type:"delete",endpoint:r,success:function(e){a(Ee(s.uuid,{final:i}))},successCallback:c,errorCallback:l}))}}(o.uuid))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(ne.a,{type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Le.a,null)}))),c.a.createElement(ne.a,{size:"small",onClick:function(){return f(!p)},icon:p?c.a.createElement(Ke.a,null):c.a.createElement(Xe.a,null)})))),p&&c.a.createElement(q.a,{direction:"vertical"},!u&&c.a.createElement(q.a,{direction:"vertical",style:{width:"100%",padding:".5em 0"}},c.a.createElement("b",null,"Label"),c.a.createElement(Fe,{is_locked:u,uuid:o.uuid,name:o.name})),c.a.createElement(Je,{is_locked:u,patterns:o.patterns,intent_uuid:o.uuid}),2===s&&c.a.createElement(Ve,{is_locked:u,responses:o.responses,intent_uuid:o.uuid}))))}var qe=a(293);function $e(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.agent,m=Object(n.useState)(e.name||""),d=Object(O.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(O.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(O.a)(v,2),k=y[0],j=y[1],C=function(){s(!1),f(e.name||""),g(!1),j(!1)};return c.a.createElement("div",{className:"component terraced"},c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={error:function(){s(!1),j(!1)},final:o?function(){s(!1),g(!1),j(!1)}:C};e.preventDefault(),h&&(s(!0),j(!0),a(ve(o?{uuid:o,name:p}:{agent_uuid:u.uuid,name:p},t)))}},c.a.createElement("div",{className:"component"},c.a.createElement(q.a,{size:"small",align:"center"},c.a.createElement("span",null,c.a.createElement(qe.a,null))),c.a.createElement("input",{type:"text",name:"name",onChange:function(t){f(t.target.value),g(t.target.value!==e.name&&""!==t.target.value)},value:p,placeholder:o?"Module Name":"New Module Name"}),c.a.createElement("div",{className:"options"},c.a.createElement(q.a,{size:"small",style:{height:"1em"},align:"center"},h&&(k?c.a.createElement(ne.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(ne.a,{htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Me.a,null):c.a.createElement(ze.a,null)})),h&&c.a.createElement(ne.a,{disabled:r,type:"danger",shape:"circle",size:"small",onClick:C,icon:c.a.createElement(_e.a,null)}))))))}var Qe=a(11),Ze=a(294),et=a(161),tt=a.n(et),at=(a(252),a(253),H.a.Content);H.a.Sider;function nt(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.agent,m=Object(n.useState)(e.code||""),d=Object(O.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(O.a)(E,2),h=b[0],v=b[1],y=Object(n.useState)(!1),k=Object(O.a)(y,2),j=k[0],C=k[1],S=function(){s(!1),f(e.code||""),v(!1),C(!1)};return c.a.createElement(H.a,{style:{background:"#fff",height:"100%"}},c.a.createElement(q.a,{align:"center",style:{position:"relative",overflow:"hidden",padding:0,zIndex:100,width:"100%",height:"3em",background:"#fff",border:0,borderBottom:"1px solid #f0f0f0"}},c.a.createElement(q.a,{style:{marginLeft:"1.5em"}},c.a.createElement(Ze.a,null)," JSON Template"),g.hasPermission("create:modules")&&c.a.createElement("div",{style:{position:"absolute",right:".5em",top:".5em"}},j?c.a.createElement(ne.a,{size:"small",shape:"circle",type:"primary",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(ne.a,{size:"small",shape:"circle",disabled:!0===r||!1===h,onClick:function(e){var t={error:function(){s(!1),C(!1)},final:o?function(){s(!1),v(!1),C(!1)}:S};e.preventDefault(),!r&&h&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{JSON.parse(e)}catch(a){return t||Ce(),!1}return!0}(p)&&(s(!0),C(!0),a(ve(o?Object(Qe.a)({uuid:o},JSON.parse(p)):Object(Qe.a)({agent_uuid:u.uuid},JSON.parse(p)),t)))},type:"primary",icon:c.a.createElement(Me.a,null)}))),c.a.createElement(at,{style:{background:"#fff",width:"100%",height:"100%",overflow:"hidden",padding:0}},c.a.createElement(tt.a,{mode:"javascript",theme:"github",onChange:function(t){f(t),v(t!==e.code&&""!==t)},fontSize:14,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,name:"code",width:"100%",value:p,setOptions:{showLineNumbers:!0,tabSize:2,wrap:!0}})))}var ct=a(295),lt=a(296),it=(H.a.Header,H.a.Content),rt=(H.a.Sider,U.a.SubMenu);function st(e){var t=X(),a=Object(O.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(!1),o=Object(O.a)(s,2),u=o[0],m=o[1],d=l.module,p=d.name,f=d.intents,b=d.is_locked,h=d.uuid,v=l.module,y=Object(n.useState)(!1),k=Object(O.a)(y,2),j=k[0],C=k[1],S=Object(n.useState)(!1),N=Object(O.a)(S,2),w=N[0],x=N[1],z=Object(n.useState)(!1),_=Object(O.a)(z,2),T=_[0],A=_[1],D=Object(n.useState)(!1),P=Object(O.a)(D,2),M=(P[0],P[1],Object(n.useState)(!1)),L=Object(O.a)(M,2),I=L[0],R=L[1],J=Object(n.useState)(!1),W=Object(O.a)(J,2),B=W[0],G=W[1];Object(n.useEffect)((function(){var t={final:function(){G(!0)}};return i(Ee(e.match.params.uuid,t)),function(){i({type:"CLEAR_MODULE",payload:null})}}),[e.match.params.uuid]);var V=function(){var e={final:function(){R(!0),m(!1)},error:function(){x(!1),m(!1)}};x(!0),m(!0),setTimeout((function(){i(je(h,e))}),0)},F=function(){var e={final:function(){A(!1),m(!1)},error:function(){A(!1),m(!1)}};A(!0),m(!0),i(ge(h,e))};return c.a.createElement(se,{header:B?c.a.createElement(Q,null,c.a.createElement(U.a,{mode:"horizontal",theme:"light",style:{margin:"-.2em 0 0 0",padding:0,border:0,height:"3.3em"}},c.a.createElement(rt,{key:"options",icon:c.a.createElement(qe.a,null),title:"Module > ".concat(p),style:{margin:0,padding:0}},g.hasPermission("update:modules")&&c.a.createElement(U.a.Item,{key:"view",icon:c.a.createElement(ct.a,null),onClick:function(){return C(!j)},disabled:u},!b&&g.hasPermission("update:modules")?j?"Edit Visually":"Edit JSON":j?"View Visually":"View JSON"),!v.is_locked&&g.hasPermission("update:modules")&&(w?c.a.createElement(U.a.Item,{key:"delete",icon:c.a.createElement(Se.a,{spin:!0})},c.a.createElement(r.b,null,"Deleting")):c.a.createElement(U.a.Item,{key:"delete",icon:c.a.createElement(Le.a,null)},c.a.createElement(De.a,{disabled:u,title:"Confirming Delete?",placement:"left",onConfirm:V,okText:"Confirm",cancelText:"Cancel"},c.a.createElement(r.b,{disabled:u,type:"danger"},"Delete")))),T?c.a.createElement(U.a.Item,{key:"download",icon:c.a.createElement(Se.a,{spin:!0})},c.a.createElement(r.b,null,c.a.createElement(Se.a,{spin:!0})," Download")):c.a.createElement(U.a.Item,{key:"download",icon:c.a.createElement(lt.a,null)},c.a.createElement(r.b,{disabled:u,onClick:F},"Download")),g.hasPermission("read:agents")&&v.agent_uuid&&c.a.createElement(U.a.Item,{key:"agent",icon:c.a.createElement(ct.a,null)},c.a.createElement(r.b,{to:"/agent/"+v.agent_uuid},"View Agent"))))):c.a.createElement(Q,{icon:c.a.createElement(qe.a,null),title:"Module > Loading"})},I&&c.a.createElement(E.a,{to:"/modules"}),c.a.createElement(Ne,{loaded:B},c.a.createElement(it,{style:{background:"#fff"}},c.a.createElement(H.a,{style:{background:"#fff"}},j?c.a.createElement(nt,{uuid:h,is_locked:b,code:he(l.module),modified:!1}):b?null:c.a.createElement(q.a,{direction:"vertical",style:{width:"100%",padding:".5em"}},c.a.createElement("b",null,"Name"),c.a.createElement($e,{is_locked:b,uuid:h,name:p})),!j&&c.a.createElement(q.a,{direction:"vertical",style:{width:"100%",padding:".5em"}},c.a.createElement("div",{className:"head"},c.a.createElement("div",{className:"list"},c.a.createElement("b",null,"Intents"))),!b&&c.a.createElement(Fe,{module_uuid:h}),c.a.createElement(Ue,{items:f,description:"Intents Empty"},f.map((function(e,t){return c.a.createElement(Ye,{agent_type:v.type,key:e.id,intent:e,is_locked:b})}))))))))}function ot(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.type,m=Object(n.useState)(e.name||""),d=Object(O.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(O.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(O.a)(v,2),k=y[0],j=y[1],C=function(){s(!1),f(e.name||""),g(!1),j(!1)};return c.a.createElement("div",{className:"component terraced"},c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={error:function(){s(!1),j(!1)},final:o?function(){s(!1),g(!1),j(!1)}:C};e.preventDefault(),h&&(s(!0),j(!0),a(I(o?{uuid:o,name:p,type:u}:{name:p,type:u},t)))}},c.a.createElement("div",{className:"component"},c.a.createElement("input",{type:"text",name:"name",onChange:function(t){f(t.target.value),g(t.target.value!==e.name&&""!==t.target.value)},value:p,placeholder:o?"".concat(T[u].name[0]," Name"):"New ".concat(T[u].name[0]," Name")}),c.a.createElement("div",{className:"options"},c.a.createElement(q.a,{size:"small",style:{height:"1em"},align:"center"},h&&(k?c.a.createElement(ne.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})}):c.a.createElement(ne.a,{htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Me.a,null):c.a.createElement(ze.a,null)})),h&&c.a.createElement(ne.a,{disabled:r,type:"danger",shape:"circle",size:"small",onClick:C,icon:c.a.createElement(_e.a,null)}))))))}var ut=a(63);function mt(e){e.title;return c.a.createElement(ut.a,{mouseLeaveDelay:0,title:e.title},e.children)}var dt=a(297),pt=a(298);function ft(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),s=i[0],o=i[1],u=e.module,m=Object(n.useState)(!1),d=Object(O.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(O.a)(E,2),h=b[0],v=b[1],y=Object(n.useState)(!1),k=Object(O.a)(y,2),j=k[0],C=k[1];return c.a.createElement("div",{className:"component terraced"},c.a.createElement(q.a,null,c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement(qe.a,null)),c.a.createElement("div",null,u.name),u.is_noise&&c.a.createElement(mt,{title:"Training Noise"},c.a.createElement(dt.a,null))),c.a.createElement("div",{className:"options"},c.a.createElement(q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),!u.is_locked&&g.hasPermission("update:modules")&&(p?c.a.createElement(mt,{title:"Deleting Module"},c.a.createElement(ne.a,{type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})})):c.a.createElement(mt,{title:"Delete Module"},c.a.createElement(De.a,{disabled:s,title:"Confirming Delete?",placement:"left",onConfirm:function(){var e={error:function(){f(!1),o(!1)}};f(!0),o(!0),setTimeout((function(){a(je(u.uuid,e))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(ne.a,{disabled:s,type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Le.a,null)})))),g.hasPermission("update:agents")&&(j?c.a.createElement(mt,{title:u.is_noise?"Setting as Training Noise":"Setting as not Training Noise"},c.a.createElement(ne.a,{shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})})):c.a.createElement(mt,{title:u.is_noise?"Set as not Training Noise":"Set as Training Noise"},c.a.createElement(ne.a,{disabled:s,shape:"circle",size:"small",onClick:function(){var e={final:function(){C(!1),o(!1)},error:function(){C(!1),o(!1)}};C(!0),o(!0),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final;a(_({endpoint:"/modules/".concat(e.uuid,"/noise/").concat(e.flag),type:"patch",data:{},success:function(e){},successCallback:n,errorCallback:c,finalCallback:l}))}}({uuid:u.uuid,flag:!u.is_noise},e))},icon:u.is_noise?c.a.createElement(pt.a,null):c.a.createElement(dt.a,null)}))),g.hasPermission("read:modules")&&(h?c.a.createElement(mt,{title:"Fetching"},c.a.createElement(ne.a,{shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})})):c.a.createElement(mt,{title:"Download"},c.a.createElement(ne.a,{disabled:s,shape:"circle",size:"small",onClick:function(){var e={final:function(){v(!1),o(!1)},error:function(){v(!1),o(!1)}};v(!0),o(!0),a(ge(u.uuid,e))},icon:c.a.createElement(lt.a,null)}))),g.hasPermission("read:modules")&&c.a.createElement(r.b,{to:"/module/"+u.uuid},c.a.createElement(mt,{title:"View"},c.a.createElement(ne.a,{disabled:s,shape:"circle",size:"small",icon:c.a.createElement(ct.a,null)}))))))}function Et(e){var t=e.modules;return c.a.createElement(q.a,{direction:"vertical",style:{width:"100%"}},Object.values(t).map((function(e,t){return c.a.createElement(ft,{key:e.id,module:e})})))}var bt=a(271),ht=a(299),gt=H.a.Content;function vt(e){var t=Object(n.useState)(!1),a=Object(O.a)(t,2),l=a[0],i=a[1],r=X(),s=(Object(O.a)(r,2)[1],Object(Qe.a)(Object(Qe.a)({multiple:!0,showUploadList:!1,name:"file",action:"/api/agents/".concat(e.agent.uuid,"/modules/upload")},g.apiAuthHeaders()),{},{onChange:function(e){console.log(e),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?S.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&S.b.error("".concat(e.file.name," file upload failed."))}}));return c.a.createElement(gt,{style:{background:"#fff"}},g.hasPermission("create:modules")&&c.a.createElement(q.a,{align:"center",theme:"light",style:{padding:0,border:0,minHeight:"1.4em"}},c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement(qe.a,null)," Create "),l?c.a.createElement(ut.a,{title:"Add with Name"},c.a.createElement(ne.a,{onClick:function(){return i(!1)}},"Name")):c.a.createElement(ut.a,{title:"Add with Template"},c.a.createElement(ne.a,{onClick:function(){return i(!0)}},"{JSON}")),c.a.createElement(bt.a,s,c.a.createElement(ne.a,null,"Upload",c.a.createElement(ht.a,null)))),l?c.a.createElement("div",{className:"list",style:{margin:".5em 0 0 0"}},c.a.createElement("div",{className:"component terraced",style:{padding:0}},c.a.createElement(H.a,{style:{background:"#fff"}},c.a.createElement(nt,e)))):c.a.createElement(H.a,{style:{background:"#fff",margin:".5em 0 0 0"}},c.a.createElement("div",{className:"list"},g.hasPermission("create:modules")&&c.a.createElement($e,e))))}we.a.Option,H.a.Content;function yt(e){var t=X(),a=Object(O.a)(t,2),l=a[0],i=(a[1],Object(n.useState)(!1)),r=Object(O.a)(i,2),s=(r[0],r[1],e.agent),o=l.modules,u=(o.modules,o.loaded,Object(n.useState)(!1)),m=Object(O.a)(u,2);m[0],m[1];return c.a.createElement(q.a,{direction:"vertical",style:{width:"100%",padding:".5em 0"}},c.a.createElement(He.a,{plain:!0},c.a.createElement(qe.a,null)," Modules"),!s.is_locked&&g.hasPermission("update:agents")?c.a.createElement(vt,{code:T[s.type].code,agent:s}):null,0!==s.modules.length&&c.a.createElement(Et,{modules:s.modules}))}var Ot=window.location.origin+"/api",kt=H.a.Content;H.a.Sider;function jt(e){var t=X(),a=(Object(O.a)(t,2)[1],Object(n.useState)(!1)),l=Object(O.a)(a,2),i=(l[0],l[1],e.uuid),r=e.type,s=Object(n.useState)(""),o=Object(O.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)("Waiting for input."),p=Object(O.a)(d,2),f=p[0],E=p[1],b=function(e){m(e.target.value)},h=function(e){e.preventDefault(),x.a.post("".concat(Ot,"/classify/").concat(i),{input:u}).then((function(e){E(JSON.stringify(e.data,null,2)),m("")}))},g=function(){return c.a.createElement("form",{className:"grid",onSubmit:h},c.a.createElement("div",{className:"component terraced"},c.a.createElement("input",{name:"input",className:"chat-input",onChange:b,value:u,placeholder:"Type here."}),c.a.createElement("div",{className:"options"},c.a.createElement("div",{onClick:h,className:"chat-input-send"},c.a.createElement(Z.a,null)," "))))};switch(r){case"inline":return c.a.createElement("div",{className:"component terraced"},c.a.createElement("div",{className:"list no-margin-padding-border"},c.a.createElement(q.a,{align:"center",style:{background:"#fff",padding:0,height:"3.5em",border:0}},c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement(Y,{type:1})," Classify")),0==!f.length&&c.a.createElement("div",{className:"list"},c.a.createElement("div",{className:"component "},c.a.createElement("div",{className:"component "},c.a.createElement("div",{className:"classifier-results"},c.a.createElement("pre",null,f))))),g()));case"page":default:return c.a.createElement("div",{className:"component"},c.a.createElement(q.a,{align:"center",style:{background:"#fff",padding:0,height:"3.5em",border:0}},c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement(Y,{type:1})," Classify")),c.a.createElement(kt,null,c.a.createElement("div",{className:"classifier-results",style:{marginLeft:"1rem",marginRight:"1rem"}},c.a.createElement("pre",null,f))),c.a.createElement("div",{className:"footer"},g()))}}var Ct=a(300),St=a(301),Nt=a(302),wt=a(303),xt=a(304),zt=a(305),_t=a(306);H.a.Content;function Tt(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=i[1],o=e.agent,u=Object(n.useState)(!1),m=Object(O.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),E=Object(O.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)(!1),y=Object(O.a)(v,2),k=(y[0],y[1],Object(n.useState)(!1)),j=Object(O.a)(k,2),C=j[0],S=j[1],N=Object(n.useState)(!1),w=Object(O.a)(N,2),x=w[0],z=w[1],T=Object(n.useState)(!1),A=Object(O.a)(T,2),M=A[0],L=A[1],I=Object(n.useState)(!1),R=Object(O.a)(I,2),U=R[0],H=R[1];return c.a.createElement("div",{className:"component terraced"},c.a.createElement("div",{className:"list no-margin-padding-border"},c.a.createElement("div",{className:"grid no-margin-padding-border",style:{whiteSpace:"nowrap"}},c.a.createElement(q.a,null,c.a.createElement(Y,{type:o.type}),o.name,o.is_locked&&c.a.createElement(mt,{title:"Agent Locked",overlayStyle:{borderRadius:".5em"}},c.a.createElement(Ct.a,null)),o.is_main&&c.a.createElement(mt,{title:"Main Agent"},c.a.createElement(St.a,null)),o.is_template&&c.a.createElement(mt,{title:"Template"},c.a.createElement(Ze.a,null))),c.a.createElement(q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),!o.is_locked&&g.hasPermission("delete:agents")&&(b?c.a.createElement(mt,{title:"Deleting Agent"},c.a.createElement(ne.a,{type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})})):c.a.createElement(mt,{title:"Delete Agent"},c.a.createElement(De.a,{disabled:r,title:"Confirming Delete?",placement:"left",onConfirm:function(){var e={error:function(){h(!1),s(!1)}};h(!0),s(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e);a(_({endpoint:i,type:"delete",success:function(t){a(P(e))},successCallback:n,errorCallback:c,finalCallback:l}))}}(o.uuid,e))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(ne.a,{disabled:r,type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Le.a,null)})))),g.hasPermission("create:agents")&&(U?c.a.createElement(mt,{title:"Making Copy"},c.a.createElement(ne.a,{shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})})):c.a.createElement(mt,{title:"Make Copy"},c.a.createElement(ne.a,{disabled:r,shape:"circle",size:"small",onClick:function(){var e={final:function(){H(!1),s(!1)},error:function(){H(!1),s(!1)}};H(!0),s(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e,"/copy");a(_({type:"post",endpoint:i,data:{},success:function(e){a(D([e.data.result]))},successCallback:n,errorCallback:c,finalCallback:l}))}}(o.uuid,e))}),0)},icon:c.a.createElement(Nt.a,null)}))),g.hasPermission("lock:agents")&&(C?c.a.createElement(mt,{title:o.is_main?"Making Not Main":"Making Main"},c.a.createElement(ne.a,{shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})})):c.a.createElement(mt,{title:o.is_main?"Make Not Main":"Make Main"},c.a.createElement(ne.a,{disabled:r,size:"small",shape:"circle",onClick:function(){var e={final:function(){S(!1),s(!1)},error:function(){S(!1),s(!1)}};S(!0),s(!0),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e.uuid,"/main/").concat(e.flag);a(_({endpoint:i,type:"patch",data:{},success:function(e){a(D(e.data.results))},successCallback:n,errorCallback:c,finalCallback:l}))}}({uuid:o.uuid,flag:!o.is_main},e))},icon:o.is_main?c.a.createElement(St.a,null):c.a.createElement(J.a,null)}))),g.hasPermission("lock:agents")&&(x?c.a.createElement(mt,{title:o.is_locked?"Unlocking Agent":"Locking Agent"},c.a.createElement(ne.a,{shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})})):c.a.createElement(mt,{title:o.is_locked?"Unlock Agent":"Lock Agent"},c.a.createElement(ne.a,{disabled:r,size:"small",shape:"circle",onClick:function(){var e={final:function(){z(!1),s(!1)},error:function(){z(!1),s(!1)}};z(!0),s(!0),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e.uuid,"/locked/").concat(e.flag);a(_({endpoint:i,type:"patch",data:{},success:function(e){a(D([e.data.result]))},successCallback:n,errorCallback:c,finalCallback:l}))}}({uuid:o.uuid,flag:!o.is_locked},e))},icon:o.is_locked?c.a.createElement(wt.a,null):c.a.createElement(xt.a,null)}))),g.hasPermission("lock:agents")&&(M?c.a.createElement(mt,{title:o.is_template?"Making Not Template":"Making Template"},c.a.createElement(ne.a,{shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})})):c.a.createElement(mt,{title:o.is_template?"Make Not Template":"Make Template"},c.a.createElement(ne.a,{disabled:r,size:"small",shape:"circle",onClick:function(){var e={final:function(){L(!1),s(!1)},error:function(){L(!1),s(!1)}};L(!0),s(!0),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e.uuid,"/template/").concat(e.flag);a(_({endpoint:i,type:"patch",data:{},success:function(e){a(D([e.data.result]))},successCallback:n,errorCallback:c,finalCallback:l}))}}({uuid:o.uuid,flag:!o.is_template},e))},icon:o.is_template?c.a.createElement(zt.a,null):c.a.createElement(Ze.a,null)}))),g.hasPermission("update:agents")&&(o.is_building?c.a.createElement(mt,{title:"Building Agent"},c.a.createElement(ne.a,{shape:"circle",size:"small",icon:c.a.createElement(Se.a,{spin:!0})})):c.a.createElement(mt,{title:"Build Agent"},c.a.createElement(ne.a,{disabled:r,shape:"circle",size:"small",onClick:function(){return a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final;a(_({type:"post",endpoint:"/agents/".concat(e,"/build"),data:{},success:function(e){},successCallback:c,errorCallback:l,finalCallback:i}))}}(o.uuid))},icon:c.a.createElement(_t.a,null)}))),c.a.createElement(ne.a,{size:"small",onClick:function(){return p(!d)},icon:d?c.a.createElement(Ke.a,null):c.a.createElement(Xe.a,null)}))),d&&!o.is_locked&&g.hasPermission("update:agents")&&c.a.createElement(q.a,{direction:"vertical",style:{margin:".5em 0"}},c.a.createElement("b",null,"Name"),c.a.createElement(ot,{type:o.type,uuid:o.uuid,name:o.name}),c.a.createElement("b",null,"Identifier"),c.a.createElement("div",{className:"component"},o.uuid)),d&&c.a.createElement(q.a,{direction:"vertical",style:{margin:".5em 0"}},c.a.createElement(yt,{agent:o}),o.modules.length?c.a.createElement(jt,{uuid:o.uuid,type:"inline"}):null,o.modules.length&&2==o.type?c.a.createElement(ae,{identifier:o.uuid,type:"inline"}):null)))}function At(e){var t=e.type,a=X(),l=Object(O.a)(a,2),i=l[0],r=l[1],s=i.agents.loaded,o=Object.values(i.agents.agents).filter((function(e){return!t||e.type==t}));return Object(n.useEffect)((function(){s||r(M())}),[!0]),c.a.createElement(se,{header:c.a.createElement(Q,{icon:c.a.createElement(Y,{type:t}),title:"".concat(t?T[t].name[1]:"All Agents"," > List")})},c.a.createElement(q.a,{direction:"vertical",style:{width:"100%",padding:".5em"}},t&&g.hasPermission("create:agents")&&c.a.createElement(ot,{type:t}),c.a.createElement(Ne,{loaded:s},c.a.createElement(Ue,{items:o,description:"".concat(t?T[t].name[1]:"Agents"," Empty")},o.map((function(e,t){return c.a.createElement(Tt,{key:e.id,agent:e})}))))))}function Dt(e){var t=X(),a=Object(O.a)(t,2),l=a[0],i=a[1],r=l.agents,s=r.agents,o=r.loaded;return Object(n.useEffect)((function(){o&&i(R(s))}),[s]),c.a.createElement(c.a.Fragment,null)}function Pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final;a(_({type:"post",endpoint:"/lexicon/variations",data:{text:e},success:function(e){c(e)},errorCallback:l,finalCallback:i}))}}var Mt=we.a.Option,Lt=H.a.Sider;function It(e){var t=X(),a=Object(O.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),r=i[0],s=i[1],o=Object(n.useState)(!1),u=Object(O.a)(o,2),m=(u[0],u[1]),d=Object(n.useState)(""),p=Object(O.a)(d,2),f=p[0],E=p[1],b=Object(n.useState)(!1),h=Object(O.a)(b,2),g=h[0],v=h[1],y=Object(n.useState)([]),k=Object(O.a)(y,2),j=k[0],C=k[1],S=Object(n.useState)(!1),w=Object(O.a)(S,2),x=w[0],z=w[1],_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault();var t={success:function(e){C(e.data.results)},error:function(){C([])},final:function(){m(!0)}};m(!1),a(Pt(f,t))};Object(n.useEffect)((function(){g&&(g&&clearTimeout(x),z(setTimeout(_,300)))}),[f]);return c.a.createElement(Lt,{collapsed:r,defaultCollapsed:!0,zeroWidthTriggerStyle:{position:"fixed",right:"4.5em",background:"none",top:"-.1em"},breakpoint:"xxl",width:"98vw",collapsedWidth:0,theme:"light",trigger:c.a.createElement(ne.a,{size:"small",shape:"circle",icon:c.a.createElement(Pe.a,null),type:"primary",style:{}}),style:{zIndex:"1000",position:"fixed",bottom:"1vh",right:r?0:"1vw"},onCollapse:function(e,t){E(""),s(e)}},c.a.createElement("div",{className:"component terraced",style:{minHeight:"1.4em"}},c.a.createElement(q.a,{direction:"vertical",style:{width:"100%"}},0!==j.length&&c.a.createElement("div",{className:"head",style:{borderBottom:"1px solid #ccc"}},j.map((function(e,t){return c.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},0!==e.length&&e.map((function(e,a){return 0==e[1].length?c.a.createElement("div",{style:{padding:"1px 0 0 0",margin:"0 .25em 0 0"}}," ",e[0]," "):c.a.createElement(we.a,{bordered:!1,showArrow:!1,onChange:function(e){!function(e,t,a){var n=Object(N.a)(j);n[a][t][0]=j[a][t][1][e],C(n);var c=[];n.map((function(e,t){c[t]=[],e.map((function(e){c[t].push(e[0])}))}));var l=c.map((function(e,t){return e.join(" ").trim()})).join("\n");l=l.replace("\u2019","'").replace("\u2019","'").replace(" ?","?").replace(" .",".").replace(" !","!").replace(" ,",",").replace(" '","'").replace(' "','"'),E(l),v(!0)}(e,a,t)},value:e[0],placeholder:e[0],name:"name_".concat(a,"_").concat(t),size:"small",dropdownMatchSelectWidth:!1,style:{borderBottom:"3px green solid",padding:0,margin:"0 .25em 0 0"}},e[1].map((function(e,t){return c.a.createElement(Mt,{value:t},e)})))})),c.a.createElement("br",null))}))),c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:_},c.a.createElement("div",{className:"component"},c.a.createElement("textarea",{rows:f.split(/\r*\n/).length,name:"text",onChange:function(t){var a=t.target.value;a=a.replace("\u2019","'").replace("\u2019","'").replace(" ?","?").replace(" .",".").replace(" !","!").replace(" ,",",").replace(" '","'").replace(' "','"'),E(a),v(a!==e.text&&""!==a)},value:f,placeholder:"Text"}),c.a.createElement("div",{className:"options"},c.a.createElement(q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),g&&c.a.createElement(ne.a,{htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Pe.a,null),onClick:_}),g&&c.a.createElement(ne.a,{type:"danger",shape:"circle",size:"small",onClick:function(){E(""),v(!1),C([])},icon:c.a.createElement(_e.a,null)}))))))))}var Rt=H.a.Content,Ut=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={checkingSession:!0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/callback"!==this.props.location.pathname){e.next=3;break}return this.setState({checkingSession:!1}),e.abrupt("return");case 3:return e.prev=3,e.next=6,g.silentAuth();case 6:this.forceUpdate(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),"login_required"!==e.t0.error&&console.log(e.t0.error);case 12:this.setState({checkingSession:!1});case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(Dt,null),c.a.createElement(H.a,{style:{background:"#fff",height:"100vh"}},c.a.createElement(K,null),c.a.createElement(le,null),c.a.createElement(It,null),c.a.createElement(Rt,null,c.a.createElement(E.d,null,!this.state.checkingSession&&c.a.createElement(E.b,{exact:!0,path:"/",component:oe}),!g.isAuthenticated()&&c.a.createElement(E.b,{exact:!0,path:"/callback",component:y}),!this.state.checkingSession&&g.isAuthenticated()&&c.a.createElement(E.b,{path:"/classifiers",render:function(e){return c.a.createElement(At,Object.assign({},e,{type:1}))}}),!this.state.checkingSession&&g.isAuthenticated()&&c.a.createElement(E.b,{path:"/chatbots",render:function(e){return c.a.createElement(At,Object.assign({},e,{type:2}))}}),!this.state.checkingSession&&g.isAuthenticated()&&c.a.createElement(E.b,{path:"/module/:uuid",component:st}),!this.state.checkingSession&&c.a.createElement(E.b,{path:"/chat/:identifier",component:ae})))))}}]),a}(n.Component),Ht=Object(E.g)(Ut),Jt=a(66),Wt=a(168),Bt=a(169),Gt=a.n(Bt),Vt=a(170),Ft={id:null,name:"",description:"",modules:[],selected_module_id:null};var Kt={agents:{},loaded:!1};var Xt={modules:[],loaded:!1};var Yt={id:null,uuid:null,name:"",intents:[]};var qt=Object(Jt.c)({agents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_AGENTS":return Object(Qe.a)(Object(Qe.a)({},e),{},{agents:Object(Qe.a)(Object(Qe.a)({},e.agents),t.payload),loaded:!0});case"CLEAR_AGENT":var a=Object(Qe.a)({},e.agents);return delete a[t.payload],Object(Qe.a)(Object(Qe.a)({},e),{},{agents:a});default:return Object(Qe.a)({},e)}},agent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_AGENT":case"STORE_AGENT":return Object(Qe.a)(Object(Qe.a)({},e),t.payload);default:return Object(Qe.a)({},e)}},modules:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_MODULES":return Object(Qe.a)(Object(Qe.a)({},e),{},{modules:t.payload,loaded:!0});default:return Object(Qe.a)({},e)}},module:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MODULE":case"STORE_MODULE":return Object(Qe.a)(Object(Qe.a)({},e),t.payload);case"CLEAR_MODULE":return Object(Qe.a)({},Yt);default:return Object(Qe.a)({},e)}}}),$t=Object(Jt.a)(Vt.a,Wt.a,Gt.a),Qt=Object(Jt.d)(qt,{},$t);Object(l.render)(c.a.createElement(i.a,{store:Qt},c.a.createElement(r.a,null,c.a.createElement(Ht,null))),document.getElementById("root"))},96:function(e,t,a){}},[[173,1,2]]]);
//# sourceMappingURL=main.713878af.chunk.js.map