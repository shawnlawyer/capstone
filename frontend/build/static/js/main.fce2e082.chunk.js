(this.webpackJsonpcapstone=this.webpackJsonpcapstone||[]).push([[0],{174:function(e,t,a){e.exports=a(267)},267:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(13),i=a(110),r=a(30),s=a(82),o=a.n(s),u=a(97),m=a(60),d=a(61),p=a(113),f=a(111),E=a(15),b=a(147),h=new(function(){function e(){Object(m.a)(this,e),this.parseJwt=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return null}},this.auth0=new b.a.WebAuth({domain:"shawnlawyer.auth0.com",audience:"https://iconsorts.com/",clientID:"lwY9IA7VWHDIOdU7MwCuX0HgAKOUPvRu",redirectUri:window.location.origin+"/callback",responseType:"token id_token",scope:"openid profile"}),this.getProfile=this.getProfile.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this)}return Object(d.a)(e,[{key:"getProfile",value:function(){return this.profile}},{key:"getIdToken",value:function(){return this.idToken}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"isAuthenticated",value:function(){return(new Date).getTime()<this.expiresAt}},{key:"signIn",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;return new Promise((function(t,a){e.auth0.parseHash((function(n,c){return n?a(n):c&&c.idToken?(e.setSession(c),void t()):a(n)}))}))}},{key:"setSession",value:function(e){this.idToken=e.idToken,this.profile=e.idTokenPayload,this.accessToken=e.accessToken;try{this.profile.permissions=this.parseJwt(e.accessToken).permissions}catch(t){this.profile.permissions=[]}this.expiresAt=1e3*e.idTokenPayload.exp}},{key:"hasPermission",value:function(e){return!(!this.isAuthenticated()||!this.profile.permissions.includes(e))}},{key:"permissions",value:function(){return this.profile.permissions}},{key:"signOut",value:function(){this.auth0.logout({returnTo:window.location.origin,clientID:"lwY9IA7VWHDIOdU7MwCuX0HgAKOUPvRu"})}},{key:"silentAuth",value:function(){var e=this;return new Promise((function(t,a){e.auth0.checkSession({},(function(n,c){if(n)return a(n);e.setSession(c),t()}))}))}},{key:"apiAuthHeaders",value:function(){return{headers:{Authorization:"Bearer ".concat(h.accessToken)}}}}]),e}()),g=h,v=a(173),y=function(e){var t=e.component,a=(e.user,Object(v.a)(e,["component","user"]));return c.a.createElement(E.b,Object.assign({},a,{render:function(e){return g.isAuthenticated()?c.a.createElement(t,Object.assign({},a,e)):c.a.createElement(E.a,{to:{pathname:"/",state:{from:e.location}}})}}))},O=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.handleAuthentication();case 2:this.props.history.replace("/");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("p",null,"Loading profile...")}}]),a}(n.Component),k=Object(E.g)(O),j=a(3),C=(a(99),a(148)),S=a.n(C),N=new(function(){function e(){Object(m.a)(this,e),this.pusher=new S.a("129eb635d8bd35d8b915",{cluster:"us3",encrypted:!0}),this.channels={}}return Object(d.a)(e,[{key:"subscribe",value:function(e){e in this.channels||(this.channels[e]={channel:this.pusher.subscribe(e),bindings:[]})}},{key:"bindAction",value:function(e,t,a){this.subscribe(e),this.channels[e].bindings.includes(t)||(this.channels[e].bindings.push(t),this.channels[e].channel.bind(t,(function(e){a(e)})))}}]),e}()),w=a(276),x=a(79),_=a(45),T=a.n(_),z=window.location.origin+"/api";function A(e){var t=e.endpoint,a=e.type,n=e.data,c=e.success,l=e.error,i=e.final,r=e.successCallback,s=e.errorCallback,o=e.finalCallback;return function(e){var u=!1,m=!1;switch(a){case"get":u=T.a.get,m=[t,g.apiAuthHeaders()];break;case"post":u=T.a.post,m=[t,n,g.apiAuthHeaders()];break;case"patch":u=T.a.patch,m=[t,n,g.apiAuthHeaders()];break;case"delete":u=T.a.delete,m=[t,g.apiAuthHeaders()];break;default:return void console.log("error, no type defined on xhr call")}u.apply(void 0,Object(x.a)(m)).then((function(e){"function"===typeof c&&c(e),"function"===typeof r&&r()})).catch((function(e){"function"===typeof l&&l(e),"function"===typeof s&&s()})).finally((function(){"function"===typeof i&&i(),"function"===typeof o&&o()}))}}T.a.defaults.baseURL=z;var D={1:{name:["Classifier","Classifiers"],code:JSON.stringify({name:"example",intents:[{name:"greeting",patterns:[{text:"Hello"}]}]},null,2)},2:{name:["Chat Bot","Chat Bots"],code:JSON.stringify({name:"example",intents:[{name:"greeting",patterns:[{text:"Hello"}],responses:[{text:"Hello World"}]}]},null,2)}};function P(){return{type:"LOADING_AGENTS",payload:null}}function L(e){var t={};return e.map((function(e){t[e.uuid]=e})),{type:"STORE_AGENTS",payload:t}}function M(e){return{type:"CLEAR_AGENT",payload:e}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var a=e.success,n=e.error,c=e.final;t(P),t(A({endpoint:"/agents",type:"get",success:function(e){t(L(e.data.results))},successCallback:a,error:function(e){console.log(e),t(L([]))},errorCallback:n,finalCallback:c}))}}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e);a(A({endpoint:i,type:"get",success:function(e){a(L([e.data.result])),a(H())},successCallback:n,error:function(e){a(L([]))},errorCallback:c,finalCallback:l}))}}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i=e.uuid,r=i?"patch":"post",s=i?"/agents/".concat(i):"/agents";a(A({type:r,endpoint:s,data:{data:e},success:function(e){a(I({final:l}))},successCallback:n,errorCallback:c}))}}function H(e){return function(t,a){Object.values(e).map((function(e){N.bindAction(e.uuid,"start",(function(e){t(function(e){return function(t,a){w.b.success("Agent ".concat(e.name," build started.")),t(L([e]))}}(e))})),N.bindAction(e.uuid,"complete",(function(e){t(function(e){return function(t,a){w.b.success("Agent ".concat(e.name," build complete.")),t(L([e]))}}(e))})),N.bindAction(e.uuid,"error",(function(e){t(function(e){return function(t,a){w.b.error("There was an error building agent ".concat(e.name,".")),t(L([e]))}}(e))})),N.bindAction(e.uuid,"reload",(function(e){t(U(e.uuid))})),N.bindAction(e.uuid,"store",(function(e){t(L(e.results))})),N.bindAction(e.uuid,"clear",(function(e){t(M(e.uuid))}))}))}}var J=a(274),W=a(268),B=a(278),G=a(279),V=a(280),F=a(281),K=a(282),X=(a(34),J.a.SubMenu,W.a.Header,W.a.Content,W.a.Sider);var Y=Object(E.g)((function(e){var t=Object(n.useState)(!0),a=Object(j.a)(t,2),l=a[0],i=a[1];return c.a.createElement(X,{collapsed:l,defaultCollapsed:!0,zeroWidthTriggerStyle:{top:0},breakpoint:"xxl",collapsedWidth:0,theme:"light",style:{zIndex:"1000",position:"fixed",height:"100vh",top:0,left:0,bottom:0},onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){i(e)}},c.a.createElement(J.a,{mode:"inline",theme:"light",style:{top:0,bottom:0,width:"100%",height:"100%"},onClick:function(){i(!0)}},c.a.createElement(J.a.Item,{key:"home",icon:c.a.createElement(B.a,null)},c.a.createElement(r.b,{to:"/"},"Consorts Home")),g.hasPermission("read:agents")&&c.a.createElement(J.a.Item,{key:"classifiers",icon:c.a.createElement(G.a,{rotate:270})},c.a.createElement(r.b,{to:"/classifiers"},D[1].name[1])),g.hasPermission("read:agents")&&c.a.createElement(J.a.Item,{key:"chatbots",icon:c.a.createElement(V.a,null)},c.a.createElement(r.b,{to:"/chatbots"},D[2].name[1])),g.isAuthenticated()?c.a.createElement(J.a.Item,{key:"logout",icon:c.a.createElement(F.a,null),onClick:function(){g.signOut(),e.history.replace("/")}},"Sign Out"):c.a.createElement(J.a.Item,{key:"login",icon:c.a.createElement(K.a,null),onClick:g.signIn},"Sign In")))}));function q(){var e=Object(n.useContext)(i.b).store,t=e.getState,a=e.dispatch,c=e.subscribe,l=Object(n.useState)(t()),r=Object(j.a)(l,2),s=r[0],o=r[1];return Object(n.useEffect)((function(){return c((function(){o(t())}),[])})),[s,a]}function $(e){switch(e.type){case 1:return c.a.createElement(G.a,{rotate:270});case 2:return c.a.createElement(V.a,null);default:return null}}var Q=a(269),Z=a(275);W.a.Header;var ee=Object(E.g)((function(e){return c.a.createElement("div",{className:"list no-margin-padding"},c.a.createElement("div",{className:"grid no-margin-padding",style:{borderBottom:"1px solid #f0f0f0",background:"#fff",zIndex:"999",whiteSpace:"nowrap",position:"fixed",top:"0",left:"0",paddingLeft:"3em",paddingRight:".6em"}},e.children||c.a.createElement(Q.a,{size:"small",align:"center",style:{height:"3em"}},e.icon,e.title),g.isAuthenticated()&&c.a.createElement(Q.a,{align:"center"},c.a.createElement(Z.a,{size:"medium"},g.getProfile().name.charAt(0).toUpperCase()))))})),te=a(283),ae=(a(96),window.location.origin+"/api"),ne=W.a.Content;W.a.Sider;function ce(e){var t=q(),a=(Object(j.a)(t,2)[1],Object(n.useState)(!1)),l=Object(j.a)(a,2),i=(l[0],l[1],e.type),r=((e.identifier||e.match.params.identifier).identifier,Object(n.useState)("")),s=Object(j.a)(r,2),o=s[0],u=s[1],m=Object(n.useState)(""),d=Object(j.a)(m,2),p=d[0],f=d[1],E=function(e){u(e.target.value)},b=function(t){t.preventDefault(),T.a.post("".concat(ae,"/chat/").concat(e.identifier||e.match.params.identifier),{message:o}).then((function(e){f(e.data.response),u("")}))},h=function(){return c.a.createElement("form",{className:"grid",onSubmit:b},c.a.createElement("div",{className:"component terraced"},c.a.createElement("input",{name:"message",className:"chat-input",onChange:E,value:o,placeholder:"Type here."}),c.a.createElement("div",{className:"options"},c.a.createElement("div",{onClick:b,className:"chat-input-send"},c.a.createElement(te.a,null)," "))))};switch(i){case"inline":return c.a.createElement("div",{className:"component terraced",style:{background:"#fff",height:"100%"}},c.a.createElement("div",{className:"list no-margin-padding-border",style:{height:"100%"}},c.a.createElement(Q.a,{align:"center",style:{padding:0,height:"3.5em",border:0}},c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement($,{type:2})," Chat")),c.a.createElement(ne,{style:{background:"#fff"}},c.a.createElement("div",{className:"chat-responses",style:{margin:"1em"}},p.split("\n").map((function(e,t){return c.a.createElement("span",{key:t},e,c.a.createElement("br",null))})))),h()));case"page":default:return c.a.createElement(ue,{footer:c.a.createElement("div",{className:"footer"},h()),header:c.a.createElement(ee,{icon:c.a.createElement($,{type:2}),title:"".concat(D[2].name[1]," > Chat")})},c.a.createElement(W.a,{style:{background:"#fff"}},c.a.createElement("div",{className:"chat-responses",style:{margin:"1em"}},p.split("\n").map((function(e,t){return c.a.createElement("span",{key:t},e,c.a.createElement("br",null))})))))}}var le=a(85),ie=(W.a.Header,W.a.Content,W.a.Sider);var re=Object(E.g)((function(e){var t=Object(n.useState)(!0),a=Object(j.a)(t,2),l=a[0],i=a[1];return c.a.createElement(ie,{collapsed:l,defaultCollapsed:!0,zeroWidthTriggerStyle:{position:"fixed",right:"2.5em",background:"none",top:"-.1em"},breakpoint:"xxl",width:"98vw",collapsedWidth:0,theme:"light",trigger:c.a.createElement(le.a,{size:"small",shape:"circle",icon:c.a.createElement(V.a,null),type:"primary",style:{}}),style:{bottom:"1vh",zIndex:"1002",position:"fixed",height:"90vh",right:l?0:"1vw",background:"none"},onCollapse:function(e,t){i(e)}},c.a.createElement(ce,{identifier:"main",type:"inline"}))})),se=W.a.Content,oe=W.a.Footer;function ue(e){return c.a.createElement(W.a,{style:{background:"#fff"}},e.header?c.a.createElement("div",null,e.header):null,c.a.createElement(se,{className:"site-layout",style:{paddingTop:".5em",marginTop:e.header?"3em":"0",background:"#fff"}},e.children),e.footer?c.a.createElement(oe,{style:{background:"#fff"}},e.footer):null)}function me(){return c.a.createElement(ue,{header:c.a.createElement(ee,{title:"Consorts"}),footer:c.a.createElement("div",{className:"footer"},"Consorts By Shawn Lawyer 331 Wilson Ave, Swannanoa NC 28778")})}var de=a(277);function pe(){return{type:"LOADING_MODULES",payload:null}}function fe(e){var t={};return e.data.results.map((function(e){t[e.uuid]=e})),{type:"STORE_MODULES",payload:t}}function Ee(e){return{type:"STORE_MODULE",payload:e.data.result}}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var a=e.success,n=e.error,c=e.final;t(pe),t(A({type:"get",endpoint:"/modules",success:function(e){t(fe(e))},successCallback:a,error:function(e){t(fe({data:{results:[]}}))},errorCallback:n,finalCallback:c}))}}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/modules/".concat(e);a(A({type:"get",endpoint:i,success:function(e){a(Ee(e))},successCallback:n,error:function(e){a(Ee({data:{results:[]}}))},errorCallback:c,finalCallback:l}))}}function ge(e,t,a){var n=document.createElement("a"),c=new Blob([e],{type:a});n.href=URL.createObjectURL(c),n.download=t,n.click()}function ve(e){var t=e.name,a=e.intents,n=e.type,c={name:t,intents:a.map((function(e){var t={name:e.name};switch("object"===typeof e.patterns&&e.patterns.length&&(t.patterns=e.patterns.map((function(e){return{text:e.text}}))),n){case 1:break;case 2:default:"object"===typeof e.responses&&e.responses.length&&(t.responses=e.responses.map((function(e){return{text:e.text}})))}return t}))};return JSON.stringify(c,null,2)}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final;a(A({type:"get",endpoint:"/modules/".concat(e),success:function(e){ge(ve(e.data.result),"".concat(e.data.result.name.replace(" ","_"),".json"),"text/plain")},successCallback:n,errorCallback:c,finalCallback:l}))}}function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i=e.uuid,r=i?"patch":"post",s=i?"/modules/".concat(i):"/modules";a(A({type:r,endpoint:s,data:{data:e},success:function(t){a(Ee(t)),a(be({final:l})),a(U(e.agent_uuid))},successCallback:n,errorCallback:c}))}}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=(t.final,e.uuid),r=i?"patch":"post",s=i?"/intents/".concat(i):"/intents",o=n().module;a(A({type:r,endpoint:s,data:{data:e},success:function(e){a(he(o.uuid,t))},successCallback:c,errorCallback:l}))}}function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=(t.final,e.uuid),r=i?"patch":"post",s=i?"/intent/patterns/".concat(i):"/intent/patterns",o=n().module;a(A({type:r,endpoint:s,data:{data:e},success:function(e){a(he(o.uuid,t))},successCallback:c,errorCallback:l}))}}function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=(t.final,e.uuid),r=i?"patch":"post",s=i?"/intent/responses/".concat(i):"/intent/responses",o=n().module;a(A({type:r,endpoint:s,data:{data:e},success:function(e){a(he(o.uuid,t))},successCallback:c,errorCallback:l}))}}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final,r="/modules/".concat(e);a(A({type:"delete",endpoint:r,success:function(e){a(be({final:i}))},successCallback:c,errorCallback:l}))}}function Ne(e){de.a.error({message:"Error",description:"The template is not properly formatted JSON"})}var we=a(9);function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final;a(A({type:"post",endpoint:"/lexicon/variations",data:{text:e},success:function(e){c(e)},errorCallback:l,finalCallback:i}))}}var _e=a(273),Te=a(284),ze=a(285),Ae=_e.a.Option;function De(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),r=(i[0],i[1],Object(n.useState)(!1)),s=Object(j.a)(r,2),o=(s[0],s[1]),u=Object(n.useState)(e.text||""),m=Object(j.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),E=Object(j.a)(f,2),b=E[0],h=E[1],g=Object(n.useState)([]),v=Object(j.a)(g,2),y=v[0],O=v[1],k=Object(n.useState)(!1),C=Object(j.a)(k,2),S=C[0],N=C[1],w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&e.preventDefault(),""!=d){var t={success:function(e){O(e.data.results)},error:function(){O([])},final:function(){o(!0)}};o(!1),a(xe(d,t))}},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&t.preventDefault(),e.save&&e.save(Object(we.a)(Object(we.a)({},e.data),{},{text:d}))};Object(n.useEffect)((function(){clearTimeout(S),N(setTimeout(w,300))}),[d]);return c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%"}},0!==y.length&&c.a.createElement("div",{className:"head",style:{borderBottom:"1px solid #ccc"}},y.map((function(e,t){return c.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},0!==e.length&&e.map((function(e,a){return 0==e[1].length?c.a.createElement("div",{style:{padding:"1px 0 0 0",margin:"0 .25em 0 0"}}," ",e[0]," "):c.a.createElement(_e.a,{bordered:!1,showArrow:!1,onChange:function(e){!function(e,t,a){var n=Object(x.a)(y);n[a][t][0]=y[a][t][1][e],O(n);var c=[];n.map((function(e,t){c[t]=[],e.map((function(e){c[t].push(e[0])}))}));var l=c.map((function(e,t){return e.join(" ").trim()})).join("\n");l=l.replace("\u2019","'").replace("\u2019","'").replace(" ?","?").replace(" .",".").replace(" !","!").replace(" ,",",").replace(" '","'").replace(' "','"'),p(l),h(!0)}(e,a,t)},value:e[0],placeholder:e[0],name:"name_".concat(a,"_").concat(t),size:"small",dropdownMatchSelectWidth:!1,style:{borderBottom:"3px green solid",padding:0,margin:"0 .25em 0 0"}},e[1].map((function(e,t){return c.a.createElement(Ae,{value:t},e)})))})),c.a.createElement("br",null))}))),c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:_},c.a.createElement("div",{className:"component"},c.a.createElement("textarea",{rows:d.split(/\r*\n/).length,name:"text",onChange:function(t){var a=t.target.value;a=a.replace("\u2019","'").replace("\u2019","'").replace(" ?","?").replace(" .",".").replace(" !","!").replace(" ,",",").replace(" '","'").replace(' "','"'),p(a),h(a!==e.text&&""!==a)},value:d,placeholder:"Text"}),c.a.createElement("div",{className:"options"},c.a.createElement(Q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),b&&e.save&&c.a.createElement(le.a,{type:"primary",shape:"circle",size:"small",onClick:_,icon:c.a.createElement(Te.a,null)}),b&&c.a.createElement(le.a,{type:"danger",shape:"circle",size:"small",onClick:function(){e.reset&&e.reset(),p(e.text||""),h(!1),O([])},icon:c.a.createElement(ze.a,null)}))))))}var Pe=a(286);W.a.Content;function Le(e){var t=e.size||"large",a="loading-".concat(t);return e.loaded?e.children:c.a.createElement("div",{className:"head"},c.a.createElement("div",{className:a},c.a.createElement(Pe.a,{spin:!0})))}var Me=a(287);_e.a.Option;var Ie=a(270),Ue=a(288),Re=a(289),He=a(290);function Je(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.intent_uuid,m=Object(n.useState)(e.text||""),d=Object(j.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(j.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(j.a)(v,2),O=y[0],k=y[1],C=Object(n.useState)(!1),S=Object(j.a)(C,2),N=S[0],w=S[1],x=Object(n.useState)(!1),_=Object(j.a)(x,2),T=_[0],z=_[1],D=function(){s(!1),f(e.text||""),g(!1),k(!1),z(!1)},P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={error:function(){s(!1),k(!1)},final:o&&0==e?function(){s(!1),g(!1),k(!1)}:D};s(!0),k(!0),0==e&&(e=o?{uuid:o,text:p}:{intent_uuid:u,text:p}),console.log(e),a(je(e,t))};return c.a.createElement("div",{className:"component terraced"},T?c.a.createElement(De,{text:p,data:{intent_uuid:u},save:P,reset:D}):c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){e.preventDefault(),h&&P()}},c.a.createElement("div",{className:"component"},c.a.createElement(Q.a,{size:"small"},c.a.createElement(Me.a,{rotate:"180"})),c.a.createElement("input",{type:"text",name:"text",onChange:function(t){f(t.target.value),g(t.target.value!==e.text&&""!==t.target.value)},value:p,placeholder:o?"Pattern":"New Pattern"}),c.a.createElement("div",{className:"options"},c.a.createElement(Q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),o&&c.a.createElement(le.a,{disabled:r,shape:"circle",size:"small",icon:c.a.createElement(Ue.a,null),onClick:z}),h&&(O?c.a.createElement(le.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})}):c.a.createElement(le.a,{disabled:r,htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Re.a,null):c.a.createElement(Te.a,null)})),h?c.a.createElement(le.a,{type:"danger",shape:"circle",size:"small",onClick:D,icon:c.a.createElement(ze.a,null)}):o&&(N?c.a.createElement(le.a,{shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})}):c.a.createElement(Ie.a,{disabled:r,title:"Confirming Delete?",placement:"left",onConfirm:function(){s(!0),w(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final,r="/intent/patterns/".concat(e),s=n().module;a(A({type:"delete",endpoint:r,success:function(e){a(he(s.uuid,{final:i}))},successCallback:c,errorCallback:l}))}}(o))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(le.a,{disabled:r,type:"danger",shape:"circle",size:"small",icon:c.a.createElement(He.a,null)}))))))))}var We=a(86);function Be(e){var t=e.items||0,a=e.description||null;return t.length>0?c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%"}},e.children):c.a.createElement("div",{className:"terraced",style:{padding:".5em"}},c.a.createElement(We.a,{description:c.a.createElement("div",null,c.a.createElement("b",null,a))}))}var Ge=a(271);function Ve(e){var t=e.intent_uuid,a=e.patterns,n=e.is_locked;return c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%",padding:".5em 0"}},c.a.createElement("div",{className:"head"},c.a.createElement(Ge.a,{plain:!0},c.a.createElement("b",null,"Patterns"))),!n&&c.a.createElement(Je,{intent_uuid:t}),c.a.createElement(Be,{items:a,description:"Patterns Empty"},a.map((function(e,a){return n?c.a.createElement("div",{className:"component terraced"},e.text):c.a.createElement(Je,{key:e.id,uuid:e.uuid,intent_uuid:t,text:e.text})}))))}var Fe=a(291);function Ke(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.intent_uuid,m=Object(n.useState)(e.text||""),d=Object(j.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(j.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(j.a)(v,2),O=y[0],k=y[1],C=Object(n.useState)(!1),S=Object(j.a)(C,2),N=S[0],w=S[1],x=function(){s(!1),f(e.text||""),g(!1),k(!1)};return c.a.createElement("div",{className:"component terraced"},c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={error:function(){s(!1),k(!1)},final:o?function(){s(!1),g(!1),k(!1)}:x};e.preventDefault(),h&&(s(!0),k(!0),a(Ce(o?{uuid:o,text:p}:{intent_uuid:u,text:p},t)))}},c.a.createElement("div",{className:"component"},c.a.createElement(Q.a,{size:"small",style:{maxHeight:"1.4em"}},c.a.createElement(Fe.a,{rotate:"180"})),c.a.createElement("textarea",{rows:p.split(/\r*\n/).length,name:"text",onChange:function(t){f(t.target.value),g(t.target.value!==e.text&&""!==t.target.value)},value:p,placeholder:o?"Response":"New Response"}),c.a.createElement("div",{className:"options"},c.a.createElement(Q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),h&&(O?c.a.createElement(le.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})}):c.a.createElement(le.a,{disabled:r,htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Re.a,null):c.a.createElement(Te.a,null)})),h?c.a.createElement(le.a,{type:"danger",shape:"circle",size:"small",onClick:x,icon:c.a.createElement(ze.a,null)}):o&&(N?c.a.createElement(le.a,{shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})}):c.a.createElement(Ie.a,{disabled:r,title:"Confirming Delete?",placement:"left",onConfirm:function(){s(!0),w(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final,r="/intent/responses/".concat(e),s=n().module;a(A({type:"delete",endpoint:r,success:function(e){a(he(s.uuid,{final:i}))},successCallback:c,errorCallback:l}))}}(o))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(le.a,{disabled:r,type:"danger",shape:"circle",size:"small",icon:c.a.createElement(He.a,null)}))))))))}var Xe=W.a.Content;function Ye(e){var t=e.intent_uuid,a=e.responses,n=e.is_locked;return c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%",padding:".5em 0"}},c.a.createElement("div",{className:"head"},c.a.createElement(Ge.a,{plain:!0},c.a.createElement("b",null,"Responses"))),!n&&c.a.createElement(Ke,{intent_uuid:t}),c.a.createElement(Be,{items:a,description:"Responses Empty"},a.map((function(e,t){return n?c.a.createElement("div",{key:e.uuid,className:"component"},c.a.createElement(Xe,null,e.text.split("\n").map((function(e,t){return c.a.createElement("span",{key:t},e,c.a.createElement("br",null))})))):c.a.createElement(Ke,{key:e.uuid,uuid:e.uuid,text:e.text})}))))}function qe(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.module_uuid,m=Object(n.useState)(e.name||""),d=Object(j.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(j.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(j.a)(v,2),O=y[0],k=y[1],C=function(){s(!1),f(e.name||""),g(!1),k(!1)};return c.a.createElement("div",{className:"component terraced"},c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={error:function(){s(!1),k(!1)},final:o?function(){s(!1),g(!1),k(!1)}:C};e.preventDefault(),h&&(s(!0),k(!0),a(ke(o?{uuid:o,name:p}:{module_uuid:u,name:p},t)))}},c.a.createElement("div",{className:"component"},c.a.createElement("input",{type:"text",name:"name",onChange:function(t){var a=t.target.value;a=(a=a.replace(/[&\^@`!=;|\[\]/\\#,+()$~%.'":*?<>{}]/g,"")).replace(/[\-\s]/g,"_"),f(a),g(a!==e.name&&""!==a)},value:p,placeholder:o?"Intent Name":"New Intent Name"}),c.a.createElement("div",{className:"options"},c.a.createElement(Q.a,{size:"small",style:{height:"1em"},align:"center"},h&&(O?c.a.createElement(le.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})}):c.a.createElement(le.a,{htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Re.a,null):c.a.createElement(Te.a,null)})),h&&c.a.createElement(le.a,{disabled:r,type:"danger",shape:"circle",size:"small",onClick:C,icon:c.a.createElement(ze.a,null)}))))))}var $e=a(292),Qe=a(293);function Ze(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),r=i[0],s=(i[1],e.agent_type),o=e.intent,u=e.is_locked,m=Object(n.useState)(!1),d=Object(j.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(j.a)(E,2),h=b[0],v=b[1];return c.a.createElement("div",{className:"component terraced"},c.a.createElement("div",{className:"list no-margin-padding-border"},c.a.createElement("div",{className:"component"},c.a.createElement("div",{onClick:function(){return f(!p)}},o.name),c.a.createElement("div",{className:"options"},c.a.createElement(Q.a,{size:"small"},!u&&g.hasPermission("delete:agents")&&(h?c.a.createElement(le.a,{type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})}):c.a.createElement(Ie.a,{disabled:r,title:"Confirming Delete?",placement:"left",onConfirm:function(){v(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final,r="/intents/".concat(e),s=n().module;a(A({type:"delete",endpoint:r,success:function(e){a(he(s.uuid,{final:i}))},successCallback:c,errorCallback:l}))}}(o.uuid))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(le.a,{type:"danger",shape:"circle",size:"small",icon:c.a.createElement(He.a,null)}))),c.a.createElement(le.a,{size:"small",onClick:function(){return f(!p)},icon:p?c.a.createElement($e.a,null):c.a.createElement(Qe.a,null)})))),p&&c.a.createElement(Q.a,{direction:"vertical"},!u&&c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%",padding:".5em 0"}},c.a.createElement("b",null,"Label"),c.a.createElement(qe,{is_locked:u,uuid:o.uuid,name:o.name})),c.a.createElement(Ve,{is_locked:u,patterns:o.patterns,intent_uuid:o.uuid}),2===s&&c.a.createElement(Ye,{is_locked:u,responses:o.responses,intent_uuid:o.uuid}))))}var et=a(294);function tt(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.agent,m=Object(n.useState)(e.name||""),d=Object(j.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(j.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(j.a)(v,2),O=y[0],k=y[1],C=function(){s(!1),f(e.name||""),g(!1),k(!1)};return c.a.createElement("div",{className:"component terraced"},c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={error:function(){s(!1),k(!1)},final:o?function(){s(!1),g(!1),k(!1)}:C};e.preventDefault(),h&&(s(!0),k(!0),a(Oe(o?{uuid:o,name:p}:{agent_uuid:u.uuid,name:p},t)))}},c.a.createElement("div",{className:"component"},c.a.createElement(Q.a,{size:"small",align:"center"},c.a.createElement("span",null,c.a.createElement(et.a,null))),c.a.createElement("input",{type:"text",name:"name",onChange:function(t){f(t.target.value),g(t.target.value!==e.name&&""!==t.target.value)},value:p,placeholder:o?"Module Name":"New Module Name"}),c.a.createElement("div",{className:"options"},c.a.createElement(Q.a,{size:"small",style:{height:"1em"},align:"center"},h&&(O?c.a.createElement(le.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})}):c.a.createElement(le.a,{htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Re.a,null):c.a.createElement(Te.a,null)})),h&&c.a.createElement(le.a,{disabled:r,type:"danger",shape:"circle",size:"small",onClick:C,icon:c.a.createElement(ze.a,null)}))))))}var at=a(295),nt=a(161),ct=a.n(nt),lt=(a(253),a(254),W.a.Content);W.a.Sider;function it(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.agent,m=Object(n.useState)(e.code||""),d=Object(j.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(j.a)(E,2),h=b[0],v=b[1],y=Object(n.useState)(!1),O=Object(j.a)(y,2),k=O[0],C=O[1],S=function(){s(!1),f(e.code||""),v(!1),C(!1)};return c.a.createElement(W.a,{style:{background:"#fff",height:"100%"}},c.a.createElement(Q.a,{align:"center",style:{position:"relative",overflow:"hidden",padding:0,zIndex:100,width:"100%",height:"3em",background:"#fff",border:0,borderBottom:"1px solid #f0f0f0"}},c.a.createElement(Q.a,{style:{marginLeft:"1.5em"}},c.a.createElement(at.a,null)," JSON Template"),g.hasPermission("create:modules")&&c.a.createElement("div",{style:{position:"absolute",right:".5em",top:".5em"}},k?c.a.createElement(le.a,{size:"small",shape:"circle",type:"primary",icon:c.a.createElement(Pe.a,{spin:!0})}):c.a.createElement(le.a,{size:"small",shape:"circle",disabled:!0===r||!1===h,onClick:function(e){var t={error:function(){s(!1),C(!1)},final:o?function(){s(!1),v(!1),C(!1)}:S};e.preventDefault(),!r&&h&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{JSON.parse(e)}catch(a){return t||Ne(),!1}return!0}(p)&&(s(!0),C(!0),a(Oe(o?Object(we.a)({uuid:o},JSON.parse(p)):Object(we.a)({agent_uuid:u.uuid},JSON.parse(p)),t)))},type:"primary",icon:c.a.createElement(Re.a,null)}))),c.a.createElement(lt,{style:{background:"#fff",width:"100%",height:"100%",overflow:"hidden",padding:0}},c.a.createElement(ct.a,{mode:"javascript",theme:"github",onChange:function(t){f(t),v(t!==e.code&&""!==t)},fontSize:14,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,name:"code",width:"100%",value:p,setOptions:{showLineNumbers:!0,tabSize:2,wrap:!0}})))}var rt=a(296),st=a(297),ot=(W.a.Header,W.a.Content),ut=(W.a.Sider,J.a.SubMenu);function mt(e){var t=q(),a=Object(j.a)(t,2),l=a[0],i=a[1],s=Object(n.useState)(!1),o=Object(j.a)(s,2),u=o[0],m=o[1],d=l.module,p=d.name,f=d.intents,b=d.is_locked,h=d.uuid,v=l.module,y=Object(n.useState)(!1),O=Object(j.a)(y,2),k=O[0],C=O[1],S=Object(n.useState)(!1),N=Object(j.a)(S,2),w=N[0],x=N[1],_=Object(n.useState)(!1),T=Object(j.a)(_,2),z=T[0],A=T[1],D=Object(n.useState)(!1),P=Object(j.a)(D,2),L=(P[0],P[1],Object(n.useState)(!1)),M=Object(j.a)(L,2),I=M[0],U=M[1],R=Object(n.useState)(!1),H=Object(j.a)(R,2),B=H[0],G=H[1];Object(n.useEffect)((function(){var t={final:function(){G(!0)}};return i(he(e.match.params.uuid,t)),function(){i({type:"CLEAR_MODULE",payload:null})}}),[e.match.params.uuid]);var V=function(){var e={final:function(){U(!0),m(!1)},error:function(){x(!1),m(!1)}};x(!0),m(!0),setTimeout((function(){i(Se(h,e))}),0)},F=function(){var e={final:function(){A(!1),m(!1)},error:function(){A(!1),m(!1)}};A(!0),m(!0),i(ye(h,e))};return c.a.createElement(ue,{header:B?c.a.createElement(ee,null,c.a.createElement(J.a,{mode:"horizontal",theme:"light",style:{margin:"-.2em 0 0 0",padding:0,border:0,height:"3.3em"}},c.a.createElement(ut,{key:"options",icon:c.a.createElement(et.a,null),title:"Module > ".concat(p),style:{margin:0,padding:0}},g.hasPermission("update:modules")&&c.a.createElement(J.a.Item,{key:"view",icon:c.a.createElement(rt.a,null),onClick:function(){return C(!k)},disabled:u},!b&&g.hasPermission("update:modules")?k?"Edit Visually":"Edit JSON":k?"View Visually":"View JSON"),!v.is_locked&&g.hasPermission("update:modules")&&(w?c.a.createElement(J.a.Item,{key:"delete",icon:c.a.createElement(Pe.a,{spin:!0})},c.a.createElement(r.b,null,"Deleting")):c.a.createElement(J.a.Item,{key:"delete",icon:c.a.createElement(He.a,null)},c.a.createElement(Ie.a,{disabled:u,title:"Confirming Delete?",placement:"left",onConfirm:V,okText:"Confirm",cancelText:"Cancel"},c.a.createElement(r.b,{disabled:u,type:"danger"},"Delete")))),z?c.a.createElement(J.a.Item,{key:"download",icon:c.a.createElement(Pe.a,{spin:!0})},c.a.createElement(r.b,null,c.a.createElement(Pe.a,{spin:!0})," Download")):c.a.createElement(J.a.Item,{key:"download",icon:c.a.createElement(st.a,null)},c.a.createElement(r.b,{disabled:u,onClick:F},"Download")),g.hasPermission("read:agents")&&v.agent_uuid&&c.a.createElement(J.a.Item,{key:"agent",icon:c.a.createElement(rt.a,null)},c.a.createElement(r.b,{to:"/agent/"+v.agent_uuid},"View Agent"))))):c.a.createElement(ee,{icon:c.a.createElement(et.a,null),title:"Module > Loading"})},I&&c.a.createElement(E.a,{to:"/modules"}),c.a.createElement(Le,{loaded:B},c.a.createElement(ot,{style:{background:"#fff"}},c.a.createElement(W.a,{style:{background:"#fff"}},k?c.a.createElement(it,{uuid:h,is_locked:b,code:ve(l.module),modified:!1}):b?null:c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%",padding:".5em"}},c.a.createElement("b",null,"Name"),c.a.createElement(tt,{is_locked:b,uuid:h,name:p})),!k&&c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%",padding:".5em"}},c.a.createElement("div",{className:"head"},c.a.createElement("div",{className:"list"},c.a.createElement("b",null,"Intents"))),!b&&c.a.createElement(qe,{module_uuid:h}),c.a.createElement(Be,{items:f,description:"Intents Empty"},f.map((function(e,t){return c.a.createElement(Ze,{agent_type:v.type,key:e.id,intent:e,is_locked:b})}))))))))}function dt(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),r=i[0],s=i[1],o=e.uuid,u=e.type,m=Object(n.useState)(e.name||""),d=Object(j.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(j.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),y=Object(j.a)(v,2),O=y[0],k=y[1],C=function(){s(!1),f(e.name||""),g(!1),k(!1)};return c.a.createElement("div",{className:"component terraced"},c.a.createElement("form",{className:"grid no-margin-padding-border",onSubmit:function(e){var t={error:function(){s(!1),k(!1)},final:o?function(){s(!1),g(!1),k(!1)}:C};e.preventDefault(),h&&(s(!0),k(!0),a(R(o?{uuid:o,name:p,type:u}:{name:p,type:u},t)))}},c.a.createElement("div",{className:"component"},c.a.createElement("input",{type:"text",name:"name",onChange:function(t){f(t.target.value),g(t.target.value!==e.name&&""!==t.target.value)},value:p,placeholder:o?"".concat(D[u].name[0]," Name"):"New ".concat(D[u].name[0]," Name")}),c.a.createElement("div",{className:"options"},c.a.createElement(Q.a,{size:"small",style:{height:"1em"},align:"center"},h&&(O?c.a.createElement(le.a,{type:"primary",shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})}):c.a.createElement(le.a,{htmlType:"submit",type:"primary",shape:"circle",size:"small",icon:o?c.a.createElement(Re.a,null):c.a.createElement(Te.a,null)})),h&&c.a.createElement(le.a,{disabled:r,type:"danger",shape:"circle",size:"small",onClick:C,icon:c.a.createElement(ze.a,null)}))))))}var pt=a(63);function ft(e){e.title;return c.a.createElement(pt.a,{mouseLeaveDelay:0,title:e.title},e.children)}var Et=a(298),bt=a(299);function ht(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),s=i[0],o=i[1],u=e.module,m=Object(n.useState)(!1),d=Object(j.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(j.a)(E,2),h=b[0],v=b[1],y=Object(n.useState)(!1),O=Object(j.a)(y,2),k=O[0],C=O[1];return c.a.createElement("div",{className:"component terraced"},c.a.createElement(Q.a,null,c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement(et.a,null)),c.a.createElement("div",null,u.name),u.is_noise&&c.a.createElement(ft,{title:"Training Noise"},c.a.createElement(Et.a,null))),c.a.createElement("div",{className:"options"},c.a.createElement(Q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),!u.is_locked&&g.hasPermission("update:modules")&&(p?c.a.createElement(ft,{title:"Deleting Module"},c.a.createElement(le.a,{type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})})):c.a.createElement(ft,{title:"Delete Module"},c.a.createElement(Ie.a,{disabled:s,title:"Confirming Delete?",placement:"left",onConfirm:function(){var e={error:function(){f(!1),o(!1)}};f(!0),o(!0),setTimeout((function(){a(Se(u.uuid,e))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(le.a,{disabled:s,type:"danger",shape:"circle",size:"small",icon:c.a.createElement(He.a,null)})))),g.hasPermission("update:agents")&&(k?c.a.createElement(ft,{title:u.is_noise?"Setting as Training Noise":"Setting as not Training Noise"},c.a.createElement(le.a,{shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})})):c.a.createElement(ft,{title:u.is_noise?"Set as not Training Noise":"Set as Training Noise"},c.a.createElement(le.a,{disabled:s,shape:"circle",size:"small",onClick:function(){var e={final:function(){C(!1),o(!1)},error:function(){C(!1),o(!1)}};C(!0),o(!0),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final;a(A({endpoint:"/modules/".concat(e.uuid,"/noise/").concat(e.flag),type:"patch",data:{},success:function(e){},successCallback:n,errorCallback:c,finalCallback:l}))}}({uuid:u.uuid,flag:!u.is_noise},e))},icon:u.is_noise?c.a.createElement(bt.a,null):c.a.createElement(Et.a,null)}))),g.hasPermission("read:modules")&&(h?c.a.createElement(ft,{title:"Fetching"},c.a.createElement(le.a,{shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})})):c.a.createElement(ft,{title:"Download"},c.a.createElement(le.a,{disabled:s,shape:"circle",size:"small",onClick:function(){var e={final:function(){v(!1),o(!1)},error:function(){v(!1),o(!1)}};v(!0),o(!0),a(ye(u.uuid,e))},icon:c.a.createElement(st.a,null)}))),g.hasPermission("read:modules")&&c.a.createElement(r.b,{to:"/module/"+u.uuid},c.a.createElement(ft,{title:"View"},c.a.createElement(le.a,{disabled:s,shape:"circle",size:"small",icon:c.a.createElement(rt.a,null)}))))))}function gt(e){var t=e.modules;return c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%"}},Object.values(t).map((function(e,t){return c.a.createElement(ht,{key:e.id,module:e})})))}var vt=a(272),yt=a(300),Ot=W.a.Content;function kt(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),l=a[0],i=a[1],r=q(),s=(Object(j.a)(r,2)[1],Object(we.a)(Object(we.a)({multiple:!0,showUploadList:!1,name:"file",action:"/api/agents/".concat(e.agent.uuid,"/modules/upload")},g.apiAuthHeaders()),{},{onChange:function(e){console.log(e),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?w.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&w.b.error("".concat(e.file.name," file upload failed."))}}));return c.a.createElement(Ot,{style:{background:"#fff"}},g.hasPermission("create:modules")&&c.a.createElement(Q.a,{align:"center",theme:"light",style:{padding:0,border:0,minHeight:"1.4em"}},c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement(et.a,null)," Create "),l?c.a.createElement(pt.a,{title:"Add with Name"},c.a.createElement(le.a,{onClick:function(){return i(!1)}},"Name")):c.a.createElement(pt.a,{title:"Add with Template"},c.a.createElement(le.a,{onClick:function(){return i(!0)}},"{JSON}")),c.a.createElement(vt.a,s,c.a.createElement(le.a,null,"Upload",c.a.createElement(yt.a,null)))),l?c.a.createElement("div",{className:"list",style:{margin:".5em 0 0 0"}},c.a.createElement("div",{className:"component terraced",style:{padding:0}},c.a.createElement(W.a,{style:{background:"#fff"}},c.a.createElement(it,e)))):c.a.createElement(W.a,{style:{background:"#fff",margin:".5em 0 0 0"}},c.a.createElement("div",{className:"list"},g.hasPermission("create:modules")&&c.a.createElement(tt,e))))}_e.a.Option,W.a.Content;function jt(e){var t=q(),a=Object(j.a)(t,2),l=a[0],i=(a[1],Object(n.useState)(!1)),r=Object(j.a)(i,2),s=(r[0],r[1],e.agent),o=l.modules,u=(o.modules,o.loaded,Object(n.useState)(!1)),m=Object(j.a)(u,2);m[0],m[1];return c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%",padding:".5em 0"}},c.a.createElement(Ge.a,{plain:!0},c.a.createElement(et.a,null)," Modules"),!s.is_locked&&g.hasPermission("update:agents")?c.a.createElement(kt,{code:D[s.type].code,agent:s}):null,0!==s.modules.length&&c.a.createElement(gt,{modules:s.modules}))}var Ct=window.location.origin+"/api",St=W.a.Content;W.a.Sider;function Nt(e){var t=q(),a=(Object(j.a)(t,2)[1],Object(n.useState)(!1)),l=Object(j.a)(a,2),i=(l[0],l[1],e.uuid),r=e.type,s=Object(n.useState)(""),o=Object(j.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)("Waiting for input."),p=Object(j.a)(d,2),f=p[0],E=p[1],b=function(e){m(e.target.value)},h=function(e){e.preventDefault(),T.a.post("".concat(Ct,"/classify/").concat(i),{input:u}).then((function(e){E(JSON.stringify(e.data,null,2)),m("")}))},g=function(){return c.a.createElement("form",{className:"grid",onSubmit:h},c.a.createElement("div",{className:"component terraced"},c.a.createElement("input",{name:"input",className:"chat-input",onChange:b,value:u,placeholder:"Type here."}),c.a.createElement("div",{className:"options"},c.a.createElement("div",{onClick:h,className:"chat-input-send"},c.a.createElement(te.a,null)," "))))};switch(r){case"inline":return c.a.createElement("div",{className:"component terraced"},c.a.createElement("div",{className:"list no-margin-padding-border"},c.a.createElement(Q.a,{align:"center",style:{background:"#fff",padding:0,height:"3.5em",border:0}},c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement($,{type:1})," Classify")),0==!f.length&&c.a.createElement("div",{className:"list"},c.a.createElement("div",{className:"component "},c.a.createElement("div",{className:"component "},c.a.createElement("div",{className:"classifier-results"},c.a.createElement("pre",null,f))))),g()));case"page":default:return c.a.createElement("div",{className:"component"},c.a.createElement(Q.a,{align:"center",style:{background:"#fff",padding:0,height:"3.5em",border:0}},c.a.createElement("span",{style:{marginLeft:"1em"}},c.a.createElement($,{type:1})," Classify")),c.a.createElement(St,null,c.a.createElement("div",{className:"classifier-results",style:{marginLeft:"1rem",marginRight:"1rem"}},c.a.createElement("pre",null,f))),c.a.createElement("div",{className:"footer"},g()))}}var wt=a(301),xt=a(302),_t=a(303),Tt=a(304),zt=a(305),At=a(306),Dt=a(307);W.a.Content;function Pt(e){var t=q(),a=Object(j.a)(t,2)[1],l=Object(n.useState)(!1),i=Object(j.a)(l,2),r=i[0],s=i[1],o=e.agent,u=Object(n.useState)(!1),m=Object(j.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),E=Object(j.a)(f,2),b=E[0],h=E[1],v=Object(n.useState)(!1),y=Object(j.a)(v,2),O=(y[0],y[1],Object(n.useState)(!1)),k=Object(j.a)(O,2),C=k[0],S=k[1],N=Object(n.useState)(!1),w=Object(j.a)(N,2),x=w[0],_=w[1],T=Object(n.useState)(!1),z=Object(j.a)(T,2),D=z[0],P=z[1],I=Object(n.useState)(!1),U=Object(j.a)(I,2),R=U[0],H=U[1];return c.a.createElement("div",{className:"component terraced"},c.a.createElement("div",{className:"list no-margin-padding-border"},c.a.createElement("div",{className:"grid no-margin-padding-border",style:{whiteSpace:"nowrap"}},c.a.createElement(Q.a,null,c.a.createElement($,{type:o.type}),o.name,o.is_locked&&c.a.createElement(ft,{title:"Agent Locked",overlayStyle:{borderRadius:".5em"}},c.a.createElement(wt.a,null)),o.is_main&&c.a.createElement(ft,{title:"Main Agent"},c.a.createElement(xt.a,null)),o.is_template&&c.a.createElement(ft,{title:"Template"},c.a.createElement(at.a,null))),c.a.createElement(Q.a,{size:"small"},c.a.createElement("span",null,"\xa0"),!o.is_locked&&g.hasPermission("delete:agents")&&(b?c.a.createElement(ft,{title:"Deleting Agent"},c.a.createElement(le.a,{type:"danger",shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})})):c.a.createElement(ft,{title:"Delete Agent"},c.a.createElement(Ie.a,{disabled:r,title:"Confirming Delete?",placement:"left",onConfirm:function(){var e={error:function(){h(!1),s(!1)}};h(!0),s(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e);a(A({endpoint:i,type:"delete",success:function(t){a(M(e))},successCallback:n,errorCallback:c,finalCallback:l}))}}(o.uuid,e))}),0)},okText:"Confirm",cancelText:"Cancel"},c.a.createElement(le.a,{disabled:r,type:"danger",shape:"circle",size:"small",icon:c.a.createElement(He.a,null)})))),g.hasPermission("create:agents")&&(R?c.a.createElement(ft,{title:"Making Copy"},c.a.createElement(le.a,{shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})})):c.a.createElement(ft,{title:"Make Copy"},c.a.createElement(le.a,{disabled:r,shape:"circle",size:"small",onClick:function(){var e={final:function(){H(!1),s(!1)},error:function(){H(!1),s(!1)}};H(!0),s(!0),setTimeout((function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e,"/copy");a(A({type:"post",endpoint:i,data:{},success:function(e){a(L([e.data.result]))},successCallback:n,errorCallback:c,finalCallback:l}))}}(o.uuid,e))}),0)},icon:c.a.createElement(_t.a,null)}))),g.hasPermission("lock:agents")&&(C?c.a.createElement(ft,{title:o.is_main?"Making Not Main":"Making Main"},c.a.createElement(le.a,{shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})})):c.a.createElement(ft,{title:o.is_main?"Make Not Main":"Make Main"},c.a.createElement(le.a,{disabled:r,size:"small",shape:"circle",onClick:function(){var e={final:function(){S(!1),s(!1)},error:function(){S(!1),s(!1)}};S(!0),s(!0),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e.uuid,"/main/").concat(e.flag);a(A({endpoint:i,type:"patch",data:{},success:function(e){a(L(e.data.results))},successCallback:n,errorCallback:c,finalCallback:l}))}}({uuid:o.uuid,flag:!o.is_main},e))},icon:o.is_main?c.a.createElement(xt.a,null):c.a.createElement(B.a,null)}))),g.hasPermission("lock:agents")&&(x?c.a.createElement(ft,{title:o.is_locked?"Unlocking Agent":"Locking Agent"},c.a.createElement(le.a,{shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})})):c.a.createElement(ft,{title:o.is_locked?"Unlock Agent":"Lock Agent"},c.a.createElement(le.a,{disabled:r,size:"small",shape:"circle",onClick:function(){var e={final:function(){_(!1),s(!1)},error:function(){_(!1),s(!1)}};_(!0),s(!0),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e.uuid,"/locked/").concat(e.flag);a(A({endpoint:i,type:"patch",data:{},success:function(e){a(L([e.data.result]))},successCallback:n,errorCallback:c,finalCallback:l}))}}({uuid:o.uuid,flag:!o.is_locked},e))},icon:o.is_locked?c.a.createElement(Tt.a,null):c.a.createElement(zt.a,null)}))),g.hasPermission("lock:agents")&&(D?c.a.createElement(ft,{title:o.is_template?"Making Not Template":"Making Template"},c.a.createElement(le.a,{shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})})):c.a.createElement(ft,{title:o.is_template?"Make Not Template":"Make Template"},c.a.createElement(le.a,{disabled:r,size:"small",shape:"circle",onClick:function(){var e={final:function(){P(!1),s(!1)},error:function(){P(!1),s(!1)}};P(!0),s(!0),a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var n=t.success,c=t.error,l=t.final,i="/agents/".concat(e.uuid,"/template/").concat(e.flag);a(A({endpoint:i,type:"patch",data:{},success:function(e){a(L([e.data.result]))},successCallback:n,errorCallback:c,finalCallback:l}))}}({uuid:o.uuid,flag:!o.is_template},e))},icon:o.is_template?c.a.createElement(At.a,null):c.a.createElement(at.a,null)}))),g.hasPermission("update:agents")&&(o.is_building?c.a.createElement(ft,{title:"Building Agent"},c.a.createElement(le.a,{shape:"circle",size:"small",icon:c.a.createElement(Pe.a,{spin:!0})})):c.a.createElement(ft,{title:"Build Agent"},c.a.createElement(le.a,{disabled:r,shape:"circle",size:"small",onClick:function(){return a(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a,n){var c=t.success,l=t.error,i=t.final;a(A({type:"post",endpoint:"/agents/".concat(e,"/build"),data:{},success:function(e){},successCallback:c,errorCallback:l,finalCallback:i}))}}(o.uuid))},icon:c.a.createElement(Dt.a,null)}))),c.a.createElement(le.a,{size:"small",onClick:function(){return p(!d)},icon:d?c.a.createElement($e.a,null):c.a.createElement(Qe.a,null)}))),d&&!o.is_locked&&g.hasPermission("update:agents")&&c.a.createElement(Q.a,{direction:"vertical",style:{margin:".5em 0"}},c.a.createElement("b",null,"Name"),c.a.createElement(dt,{type:o.type,uuid:o.uuid,name:o.name}),c.a.createElement("b",null,"Identifier"),c.a.createElement("div",{className:"component"},o.uuid)),d&&c.a.createElement(Q.a,{direction:"vertical",style:{margin:".5em 0"}},c.a.createElement(jt,{agent:o}),o.modules.length?c.a.createElement(Nt,{uuid:o.uuid,type:"inline"}):null,o.modules.length&&2==o.type?c.a.createElement(ce,{identifier:o.uuid,type:"inline"}):null)))}function Lt(e){var t=e.type,a=q(),l=Object(j.a)(a,2),i=l[0],r=l[1],s=i.agents.loaded,o=Object.values(i.agents.agents).filter((function(e){return!t||e.type==t}));return Object(n.useEffect)((function(){s||r(I())}),[!0]),c.a.createElement(ue,{header:c.a.createElement(ee,{icon:c.a.createElement($,{type:t}),title:"".concat(t?D[t].name[1]:"All Agents"," > List")})},c.a.createElement(Q.a,{direction:"vertical",style:{width:"100%",padding:".5em"}},t&&g.hasPermission("create:agents")&&c.a.createElement(dt,{type:t}),c.a.createElement(Le,{loaded:s},c.a.createElement(Be,{items:o,description:"".concat(t?D[t].name[1]:"Agents"," Empty")},o.map((function(e,t){return c.a.createElement(Pt,{key:e.id,agent:e})}))))))}function Mt(e){var t=q(),a=Object(j.a)(t,2),l=a[0],i=a[1],r=l.agents,s=r.agents,o=r.loaded;return Object(n.useEffect)((function(){o&&i(H(s))}),[s]),c.a.createElement(c.a.Fragment,null)}var It=W.a.Sider;function Ut(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),l=a[0],i=a[1];return c.a.createElement(It,{collapsed:l,defaultCollapsed:!0,zeroWidthTriggerStyle:{position:"fixed",right:"4.5em",background:"none",top:"-.1em"},breakpoint:"xxl",width:"98vw",collapsedWidth:0,theme:"light",trigger:c.a.createElement(le.a,{size:"small",shape:"circle",icon:c.a.createElement(Ue.a,null),type:"primary",style:{}}),style:{zIndex:"1000",position:"fixed",bottom:"1vh",right:l?0:"1vw"},onCollapse:function(e,t){i(e)}},c.a.createElement("div",{className:"component terraced",style:{minHeight:"1.4em"}},c.a.createElement(De,null)))}var Rt=W.a.Content,Ht=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={checkingSession:!0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/callback"!==this.props.location.pathname){e.next=3;break}return this.setState({checkingSession:!1}),e.abrupt("return");case 3:return e.prev=3,e.next=6,g.silentAuth();case 6:this.forceUpdate(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),"login_required"!==e.t0.error&&console.log(e.t0.error);case 12:this.setState({checkingSession:!1});case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(Mt,null),!this.state.checkingSession&&c.a.createElement(W.a,{style:{background:"#fff",height:"100vh"}},c.a.createElement(Y,null),c.a.createElement(re,null),c.a.createElement(Ut,null),c.a.createElement(Rt,null,c.a.createElement(E.d,null,c.a.createElement(E.b,{exact:!0,path:"/",component:me}),!g.isAuthenticated()&&c.a.createElement(E.b,{exact:!0,path:"/callback",component:k}),c.a.createElement(y,{path:"/classifiers",component:Lt,type:1}),c.a.createElement(y,{path:"/chatbots",component:Lt,type:2}),c.a.createElement(y,{path:"/module/:uuid",component:mt}),c.a.createElement(E.b,{path:"/chat/:identifier",component:ce})))))}}]),a}(n.Component),Jt=Object(E.g)(Ht),Wt=a(66),Bt=a(168),Gt=a(169),Vt=a.n(Gt),Ft=a(170),Kt={id:null,name:"",description:"",modules:[],selected_module_id:null};var Xt={agents:{},loaded:!1};var Yt={modules:[],loaded:!1};var qt={id:null,uuid:null,name:"",intents:[]};var $t=Object(Wt.c)({agents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_AGENTS":return Object(we.a)(Object(we.a)({},e),{},{agents:Object(we.a)(Object(we.a)({},e.agents),t.payload),loaded:!0});case"CLEAR_AGENT":var a=Object(we.a)({},e.agents);return delete a[t.payload],Object(we.a)(Object(we.a)({},e),{},{agents:a});default:return Object(we.a)({},e)}},agent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_AGENT":case"STORE_AGENT":return Object(we.a)(Object(we.a)({},e),t.payload);default:return Object(we.a)({},e)}},modules:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_MODULES":return Object(we.a)(Object(we.a)({},e),{},{modules:t.payload,loaded:!0});default:return Object(we.a)({},e)}},module:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MODULE":case"STORE_MODULE":return Object(we.a)(Object(we.a)({},e),t.payload);case"CLEAR_MODULE":return Object(we.a)({},qt);default:return Object(we.a)({},e)}}}),Qt=Object(Wt.a)(Ft.a,Bt.a,Vt.a),Zt=Object(Wt.d)($t,{},Qt);Object(l.render)(c.a.createElement(i.a,{store:Zt},c.a.createElement(r.a,null,c.a.createElement(Jt,null))),document.getElementById("root"))},96:function(e,t,a){}},[[174,1,2]]]);
//# sourceMappingURL=main.fce2e082.chunk.js.map